{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useContext, useCallback } from 'react';\nimport { UserContext } from 'context/UserContext';\nimport { useRouter } from 'next/router';\nimport { useMutation } from '@apollo/client';\nimport { Mention } from 'react-mentions';\nimport { useKeyboardShortcut, useEscapeToClose } from 'hooks';\nimport { throttle } from 'lodash';\nimport { COMPANY_NAME } from 'utils/config';\nimport { GET_USERS } from 'apis/User';\nimport { SET_USER_TYPING_STATUS } from 'apis/Message';\nimport { UploadManagerContext } from 'context/UploadManager';\nimport docPreview from 'public/icons/document-preview.png';\nimport emojiIcon from 'public/icons/smile.svg';\n// import addAtachmentSVG from 'public/icons/add-img.svg';\n\nimport AttachmentItem from './AttachmentItem';\nimport * as S from './styled';\nconst InputComponent = ({\n  children,\n  onSendMessage,\n  dropzoneItems,\n  eraseAttachments = () => {},\n  placeholder\n}) => {\n  const {\n    query: {\n      channel: channelUrl,\n      community: communityUrl\n    },\n    push\n  } = useRouter();\n\n  // useKeyboardShortcut({\n  //   T: () => document.getElementById('vs-input').focus(),\n  // });\n  useEscapeToClose(() => document.getElementById('vs-input').blur());\n  const {\n    0: body,\n    1: setBody\n  } = useState('');\n  const {\n    0: mentions,\n    1: onMentionsSet\n  } = useState([]);\n  const {\n    user: loggedUser\n  } = useContext(UserContext);\n  const {\n    addUploadToQueue\n  } = useContext(UploadManagerContext);\n  const [getUsers] = useMutation(GET_USERS);\n  const [setUserTypingStatus] = useMutation(SET_USER_TYPING_STATUS);\n  const {\n    0: attachments,\n    1: setAttachments\n  } = useState([]);\n  const {\n    0: attachmentPreviews,\n    1: setAttachmentPreviews\n  } = useState([]);\n  const {\n    0: status,\n    1: setStatus\n  } = useState(null);\n  const updateTypingStatus = isTyping => {\n    setUserTypingStatus({\n      variables: {\n        isTyping,\n        channelUrl: `${communityUrl}/${channelUrl}`\n      }\n    });\n  };\n  const throttledTypingStatusUpdate = useCallback(throttle(isTyping => {\n    updateTypingStatus(isTyping);\n  }, 2000, {\n    trailing: false\n  }), [channelUrl, communityUrl]);\n  const handleFileAdd = fileList => {\n    if (false) {\n      setAttachments([...attachments, ...fileList]);\n      const previewList = Array.prototype.map.call(fileList, file => file.type.includes('image/') ? URL.createObjectURL(file) : docPreview);\n      setAttachmentPreviews([...attachmentPreviews, ...previewList]);\n    }\n  };\n  const checkUrlAttachments = messageBody => {\n    const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n    const urlList = messageBody.match(urlRegex);\n    return urlList;\n  };\n  useEffect(() => {\n    if (dropzoneItems) handleFileAdd(dropzoneItems);\n  }, [dropzoneItems]);\n  const handleSendMessage = () => {\n    if (!loggedUser) {\n      push(`/[company]/login`, `/${COMPANY_NAME()}/login`, {\n        shallow: true\n      });\n    } else {\n      setStatus('SEND_MESSAGE');\n      // const urlList = checkUrlAttachments(body);\n      const urlList = [];\n      if (attachments.length) {\n        // eslint-disable-next-line\n        false && document.getElementById('sound-message').play();\n        addUploadToQueue({\n          data: {\n            attachments\n          },\n          onSendMessage: fileList => {\n            return onSendMessage({\n              body,\n              channelUrl,\n              communityUrl,\n              mentions,\n              urlList: fileList || []\n            });\n          }\n        });\n      } else if (body !== '') {\n        // eslint-disable-next-line\n        false && document.getElementById('sound-message').play();\n        onSendMessage({\n          body,\n          channelUrl,\n          communityUrl,\n          mentions,\n          urlList\n        });\n      }\n    }\n    setAttachmentPreviews([]);\n    setBody('');\n    setAttachments([]);\n    eraseAttachments();\n    setStatus(null);\n    throttledTypingStatusUpdate.cancel();\n  };\n  const onKeyDown = e => {\n    // Sending message\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (!(status === 'SEND_MESSAGE')) {\n        handleSendMessage();\n      }\n    }\n  };\n\n  // const handleFileInput = ({ target }) => {\n  //   handleFileAdd(target.files);\n  // };\n\n  const removeAttachmentFromList = number => {\n    setAttachmentPreviews(attachmentPreviews.filter((el, i) => i !== number));\n    setAttachments(attachments.filter((el, i) => i !== number));\n  };\n  const handleInputChange = (e, a, b, newMentions) => {\n    const isInputEmpty = e.target.value.length === 0;\n    setBody(e.target.value);\n    if (!isInputEmpty) {\n      throttledTypingStatusUpdate(true);\n    }\n    onMentionsSet(newMentions);\n  };\n  return __jsx(S.Container, {\n    className: status === 'SEND_MESSAGE' ? 'disabled' : ''\n  }, !!attachmentPreviews.length && attachmentPreviews.map((url, i) => __jsx(AttachmentItem, {\n    url: url,\n    key: url,\n    attachmentNumber: i,\n    onClick: removeAttachmentFromList\n  })), __jsx(S.ReactionIcon, null, __jsx(\"use\", {\n    xlinkHref: `${emojiIcon}#icon-smile`\n  })), __jsx(S.InputWrapper, null, __jsx(S.Input, {\n    id: \"vs-input\",\n    placeholder: placeholder || 'What’s happening?',\n    type: \"text\",\n    value: body,\n    onChange: handleInputChange,\n    onKeyDown: e => onKeyDown(e),\n    style: S.MentionInputStyles,\n    allowSuggestionsAboveCursor: true\n  }, __jsx(Mention, {\n    trigger: \"@\",\n    displayTransform: name => `@${name}`,\n    data: async (searchString, callback) => {\n      const {\n        data: {\n          users = []\n        } = {}\n      } = await getUsers({\n        variables: {\n          searchString\n        }\n      });\n      callback(users.map(user => ({\n        id: user.username,\n        display: user.fullname,\n        username: user.username,\n        isOnline: user.isOnline\n      })));\n    },\n    style: S.MentionStyles,\n    appendSpaceOnAdd: true,\n    renderSuggestion: user => __jsx(S.ListItem, null, __jsx(S.Avatar, {\n      name: user.username\n    }), __jsx(S.Fullname, null, user.display), __jsx(S.Username, null, `@${user.username}`), __jsx(S.Status, {\n      online: user.isOnline\n    }))\n  }))), loggedUser ? body !== '' && __jsx(S.SendButton, {\n    onClick: handleSendMessage\n  }, \"Send\") : __jsx(S.SendButton, {\n    style: {\n      padding: '0 16px',\n      width: 'auto'\n    },\n    onClick: () => push(`/[company]/login`, `/${COMPANY_NAME()}/login`, {\n      shallow: true\n    })\n  }, \"Login\"), children, __jsx(S.Overlay, {\n    className: \"overlay\"\n  }));\n};\nexport default InputComponent;","map":{"version":3,"names":["useState","useEffect","useContext","useCallback","UserContext","useRouter","useMutation","Mention","useKeyboardShortcut","useEscapeToClose","throttle","COMPANY_NAME","GET_USERS","SET_USER_TYPING_STATUS","UploadManagerContext","docPreview","emojiIcon","AttachmentItem","S","InputComponent","children","onSendMessage","dropzoneItems","eraseAttachments","placeholder","query","channel","channelUrl","community","communityUrl","push","document","getElementById","blur","body","setBody","mentions","onMentionsSet","user","loggedUser","addUploadToQueue","getUsers","setUserTypingStatus","attachments","setAttachments","attachmentPreviews","setAttachmentPreviews","status","setStatus","updateTypingStatus","isTyping","variables","throttledTypingStatusUpdate","trailing","handleFileAdd","fileList","previewList","Array","prototype","map","call","file","type","includes","URL","createObjectURL","checkUrlAttachments","messageBody","urlRegex","urlList","match","handleSendMessage","shallow","length","play","data","cancel","onKeyDown","e","key","shiftKey","preventDefault","removeAttachmentFromList","number","filter","el","i","handleInputChange","a","b","newMentions","isInputEmpty","target","value","url","MentionInputStyles","name","searchString","callback","users","id","username","display","fullname","isOnline","MentionStyles","padding","width"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/components/Chat/Input/InputComponent/index.js"],"sourcesContent":["import { useState, useEffect, useContext, useCallback } from 'react';\nimport { UserContext } from 'context/UserContext';\nimport { useRouter } from 'next/router';\nimport { useMutation } from '@apollo/client';\nimport { Mention } from 'react-mentions';\nimport { useKeyboardShortcut, useEscapeToClose } from 'hooks';\nimport { throttle } from 'lodash';\n\nimport { COMPANY_NAME } from 'utils/config';\nimport { GET_USERS } from 'apis/User';\nimport { SET_USER_TYPING_STATUS } from 'apis/Message';\nimport { UploadManagerContext } from 'context/UploadManager';\n\nimport docPreview from 'public/icons/document-preview.png';\nimport emojiIcon from 'public/icons/smile.svg';\n// import addAtachmentSVG from 'public/icons/add-img.svg';\n\nimport AttachmentItem from './AttachmentItem';\nimport * as S from './styled';\n\nconst InputComponent = ({\n  children,\n  onSendMessage,\n  dropzoneItems,\n  eraseAttachments = () => {},\n  placeholder,\n}) => {\n  const {\n    query: { channel: channelUrl, community: communityUrl },\n    push,\n  } = useRouter();\n\n  // useKeyboardShortcut({\n  //   T: () => document.getElementById('vs-input').focus(),\n  // });\n  useEscapeToClose(() => document.getElementById('vs-input').blur());\n\n  const [body, setBody] = useState('');\n  const [mentions, onMentionsSet] = useState([]);\n  const { user: loggedUser } = useContext(UserContext);\n  const { addUploadToQueue } = useContext(UploadManagerContext);\n  const [getUsers] = useMutation(GET_USERS);\n  const [setUserTypingStatus] = useMutation(SET_USER_TYPING_STATUS);\n\n  const [attachments, setAttachments] = useState([]);\n  const [attachmentPreviews, setAttachmentPreviews] = useState([]);\n  const [status, setStatus] = useState(null);\n\n  const updateTypingStatus = isTyping => {\n    setUserTypingStatus({\n      variables: {\n        isTyping,\n        channelUrl: `${communityUrl}/${channelUrl}`,\n      },\n    });\n  };\n\n  const throttledTypingStatusUpdate = useCallback(\n    throttle(\n      isTyping => {\n        updateTypingStatus(isTyping);\n      },\n      2000,\n      { trailing: false }\n    ),\n    [channelUrl, communityUrl]\n  );\n\n  const handleFileAdd = fileList => {\n    if (process.browser) {\n      setAttachments([...attachments, ...fileList]);\n\n      const previewList = Array.prototype.map.call(fileList, file =>\n        file.type.includes('image/') ? URL.createObjectURL(file) : docPreview\n      );\n\n      setAttachmentPreviews([...attachmentPreviews, ...previewList]);\n    }\n  };\n\n  const checkUrlAttachments = messageBody => {\n    const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n    const urlList = messageBody.match(urlRegex);\n\n    return urlList;\n  };\n\n  useEffect(() => {\n    if (dropzoneItems) handleFileAdd(dropzoneItems);\n  }, [dropzoneItems]);\n\n  const handleSendMessage = () => {\n    if (!loggedUser) {\n      push(`/[company]/login`, `/${COMPANY_NAME()}/login`, {\n        shallow: true,\n      });\n    } else {\n      setStatus('SEND_MESSAGE');\n      // const urlList = checkUrlAttachments(body);\n      const urlList = []\n      if (attachments.length) {\n        // eslint-disable-next-line\n        process.browser && document.getElementById('sound-message').play();\n        addUploadToQueue({\n          data: {\n            attachments,\n          },\n          onSendMessage: fileList => {\n            return onSendMessage({\n              body,\n              channelUrl,\n              communityUrl,\n              mentions,\n              urlList: fileList || [],\n            });\n          },\n        });\n      } else if (body !== '') {\n        // eslint-disable-next-line\n        process.browser && document.getElementById('sound-message').play();\n        onSendMessage({\n          body,\n          channelUrl,\n          communityUrl,\n          mentions,\n          urlList,\n        });\n      }\n    }\n\n    setAttachmentPreviews([]);\n    setBody('');\n    setAttachments([]);\n    eraseAttachments();\n    setStatus(null);\n    throttledTypingStatusUpdate.cancel();\n  };\n\n  const onKeyDown = e => {\n    // Sending message\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (!(status === 'SEND_MESSAGE')) {\n        handleSendMessage();\n      }\n    }\n  };\n\n  // const handleFileInput = ({ target }) => {\n  //   handleFileAdd(target.files);\n  // };\n\n  const removeAttachmentFromList = number => {\n    setAttachmentPreviews(attachmentPreviews.filter((el, i) => i !== number));\n    setAttachments(attachments.filter((el, i) => i !== number));\n  };\n\n  const handleInputChange = (e, a, b, newMentions) => {\n    const isInputEmpty = e.target.value.length === 0;\n    setBody(e.target.value);\n\n    if (!isInputEmpty) {\n      throttledTypingStatusUpdate(true);\n    }\n\n    onMentionsSet(newMentions);\n  };\n\n  return (\n    <S.Container className={status === 'SEND_MESSAGE' ? 'disabled' : ''}>\n      {!!attachmentPreviews.length &&\n        attachmentPreviews.map((url, i) => (\n          <AttachmentItem\n            url={url}\n            key={url}\n            attachmentNumber={i}\n            onClick={removeAttachmentFromList}\n          />\n        ))}\n      <S.ReactionIcon>\n        <use xlinkHref={`${emojiIcon}#icon-smile`} />\n      </S.ReactionIcon>\n      <S.InputWrapper>\n        {/*\n            <label htmlFor=\"comment-image\" style={{ display: 'flex' }}>\n              <S.AddAttachmentIcon>\n                <use xlinkHref={`${addAtachmentSVG}#icon-add-img`} />\n              </S.AddAttachmentIcon>\n              <S.HiddenFileInput\n                onChange={handleFileInput}\n                style={{ display: 'none' }}\n              />\n            </label>\n            */}\n        <S.Input\n          id=\"vs-input\"\n          placeholder={placeholder || 'What’s happening?'}\n          type=\"text\"\n          value={body}\n          onChange={handleInputChange}\n          onKeyDown={e => onKeyDown(e)}\n          style={S.MentionInputStyles}\n          allowSuggestionsAboveCursor\n        >\n          <Mention\n            trigger=\"@\"\n            displayTransform={name => `@${name}`}\n            data={async (searchString, callback) => {\n              const { data: { users = [] } = {} } = await getUsers({\n                variables: { searchString },\n              });\n              callback(\n                users.map(user => ({\n                  id: user.username,\n                  display: user.fullname,\n                  username: user.username,\n                  isOnline: user.isOnline,\n                }))\n              );\n            }}\n            style={S.MentionStyles}\n            appendSpaceOnAdd\n            renderSuggestion={user => (\n              <S.ListItem>\n                <S.Avatar name={user.username} />\n                <S.Fullname>{user.display}</S.Fullname>\n                <S.Username>{`@${user.username}`}</S.Username>\n                <S.Status online={user.isOnline} />\n              </S.ListItem>\n            )}\n          />\n        </S.Input>\n\n        {/*\n          <S.Actions>\n          <S.AttachButton />\n          <S.EmojiButton\n            className=\"chat-input__emoji\"\n            onClick={() => setShowEmojiPicker(!showEmojiPicker)}\n          >\n            <Picker\n              onSelect={() => {}}\n              style={{ display: showEmojiPicker ? 'block' : 'none' }}\n              emojisToShowFilter={emoji => emojiNames.indexOf(emoji.name) > -1}\n            />\n          </S.EmojiButton>\n          </S.Actions>\n        */}\n      </S.InputWrapper>\n      {loggedUser ? (\n        body !== '' && <S.SendButton onClick={handleSendMessage}>Send</S.SendButton>\n      ) : (\n        <S.SendButton\n          style={{ padding: '0 16px', width: 'auto' }}\n          onClick={() =>\n            push(`/[company]/login`, `/${COMPANY_NAME()}/login`, {\n              shallow: true,\n            })\n          }\n        >\n          Login\n        </S.SendButton>\n      )}\n      {children}\n      <S.Overlay className=\"overlay\" />\n    </S.Container>\n  );\n};\n\nexport default InputComponent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}