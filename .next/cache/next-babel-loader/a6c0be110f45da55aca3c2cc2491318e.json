{"ast":null,"code":"export const isEmpty = value => value === undefined || value === null || typeof value === 'object' && Object.keys(value).length === 0 || typeof value === 'string' && value.trim().length === 0;\nexport const isOwner = user => {\n  if (isEmpty(user)) return false;\n  if (user.owner && user.owner === '1') return true;\n  return false;\n};\nexport const canManageCommunity = user => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('manage_community')) {\n      hasPermission = true;\n    }\n  });\n  return hasPermission;\n};\nexport const canManageRole = user => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('manage_role')) {\n      hasPermission = true;\n    }\n  });\n  return hasPermission;\n};\nexport const canManageChannel = user => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('manage_channel')) {\n      hasPermission = true;\n    }\n  });\n  return hasPermission;\n};\nexport const canDeleteMessage = (user, message) => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('delete_message')) {\n      hasPermission = true;\n    }\n  });\n  if (user.username === message.username) return true;\n  return hasPermission;\n};\nexport const canEditMessage = (user, message) => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  const hasPermission = false;\n  if (user.username === message.username) return true;\n  return hasPermission;\n};","map":{"version":3,"names":["isEmpty","value","undefined","Object","keys","length","trim","isOwner","user","owner","canManageCommunity","hasPermission","role","forEach","roleSettings","includes","canManageRole","canManageChannel","canDeleteMessage","message","username","canEditMessage"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/utils/permission.js"],"sourcesContent":["export const isEmpty = value =>\n  value === undefined ||\n  value === null ||\n  (typeof value === 'object' && Object.keys(value).length === 0) ||\n  (typeof value === 'string' && value.trim().length === 0);\n\nexport const isOwner = user => {\n  if (isEmpty(user)) return false;\n  if (user.owner && user.owner === '1') return true;\n  return false;\n};\n\nexport const canManageCommunity = user => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('manage_community')) {\n      hasPermission = true;\n    }\n  });\n\n  return hasPermission;\n};\n\nexport const canManageRole = user => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('manage_role')) {\n      hasPermission = true;\n    }\n  });\n\n  return hasPermission;\n};\n\nexport const canManageChannel = user => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('manage_channel')) {\n      hasPermission = true;\n    }\n  });\n\n  return hasPermission;\n};\n\nexport const canDeleteMessage = (user, message) => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('delete_message')) {\n      hasPermission = true;\n    }\n  });\n\n  if (user.username === message.username) return true;\n\n  return hasPermission;\n};\n\nexport const canEditMessage = (user, message) => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  const hasPermission = false;\n\n  if (user.username === message.username) return true;\n\n  return hasPermission;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}