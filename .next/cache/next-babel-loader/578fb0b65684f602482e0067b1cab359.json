{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext } from 'react';\nimport { Formik, Form, Field } from 'formik';\nimport { useMutation, useApolloClient } from '@apollo/client';\nimport { ButtonPrimary } from 'components/UI/Button/Button';\nimport { Input } from 'components/UI/Input';\nimport { UserContext } from 'context/UserContext';\nimport Router from 'next/router';\nimport Cookies from 'js-cookie';\nimport { COMPANY_NAME } from 'utils/config';\nimport { SIGNUP } from 'apis/User';\nimport SimpleCrypto from 'simple-crypto-js';\nimport * as S from './styled';\nconst initialValues = {\n  username: '',\n  fullname: '',\n  bio: '',\n  email: '',\n  password: ''\n};\nconst BACKEND_URL = 'http://54.147.200.132:4000';\nconst FRONTEND_URL = 'http://54.147.200.132:3000';\nconst SignUp = () => {\n  const {\n    signin\n  } = useContext(UserContext);\n  const client = useApolloClient();\n  const onCompleted = data => {\n    Cookies.set('token', data.signup.token);\n    signin(data.signup.token);\n    // Force a reload of all the current queries now that the user is logged in\n    client.cache.reset().then(() => {\n      setTimeout(function () {\n        Router.push(`/${COMPANY_NAME()}/general/general`);\n      }, 500);\n    });\n  };\n  const onError = error => {\n    // If you want to send error to external service?\n    console.error(error);\n  };\n  const [signup, {\n    error\n  }] = useMutation(SIGNUP, {\n    onCompleted,\n    onError\n  });\n  const onSubmit = ({\n    fullname,\n    username,\n    email,\n    password,\n    bio\n  }, {\n    setSubmitting\n  }) => {\n    setSubmitting(true);\n    signup({\n      variables: {\n        fullname,\n        username,\n        email,\n        password,\n        bio\n      }\n    });\n    setSubmitting(false);\n  };\n  const getId = () => {\n    const _secretKey = 'ciscordsecret!@#';\n    const simpleCrypto = new SimpleCrypto(_secretKey);\n    console.log(simpleCrypto.encrypt(`${FRONTEND_URL}/ciscord/general/general`));\n  };\n  return __jsx(S.Container, null, __jsx(S.Form, null, __jsx(\"div\", null), __jsx(\"div\", {\n    style: {\n      marginTop: -150\n    }\n  }, __jsx(S.Heading, null, \"Sign Up\"), __jsx(S.Paragraph, null, \"To continue, create an account\"), __jsx(Formik, {\n    initialValues: initialValues,\n    onSubmit: onSubmit\n  }, ({\n    isSubmitting\n  }) => __jsx(Form, null, __jsx(Field, {\n    type: \"text\",\n    name: \"fullname\",\n    label: \"Full name\",\n    placeholder: \"Enter your full name\",\n    component: Input\n  }), __jsx(Field, {\n    type: \"text\",\n    name: \"username\",\n    label: \"Username\",\n    placeholder: \"Enter your username\",\n    component: Input\n  }), __jsx(Field, {\n    type: \"email\",\n    name: \"email\",\n    label: \"Email\",\n    placeholder: \"Enter email address\",\n    component: Input\n  }), __jsx(Field, {\n    type: \"password\",\n    name: \"password\",\n    label: \"Password\",\n    placeholder: \"********\",\n    component: Input\n  }), __jsx(Field, {\n    type: \"text\",\n    name: \"bio\",\n    label: \"Bio\",\n    placeholder: \"About yourselfs. You can edit this later\",\n    component: Input\n  }), __jsx(S.Footer, null, __jsx(ButtonPrimary, {\n    type: \"submit\",\n    name: \"button\",\n    disabled: isSubmitting,\n    style: {\n      marginLeft: 0\n    }\n  }, isSubmitting ? 'Creating an account' : 'Sign up')))), __jsx(\"button\", {\n    type: \"button\",\n    name: \"button\",\n    onClick: getId,\n    style: {\n      marginLeft: 0\n    }\n  }, \"Get Code\"), error && __jsx(\"p\", null, \"Issue occurred while registering :(\")), __jsx(\"i\", null)), __jsx(S.Image, null));\n};\nexport default SignUp;","map":{"version":3,"names":["useContext","Formik","Form","Field","useMutation","useApolloClient","ButtonPrimary","Input","UserContext","Router","Cookies","COMPANY_NAME","SIGNUP","SimpleCrypto","S","initialValues","username","fullname","bio","email","password","BACKEND_URL","FRONTEND_URL","SignUp","signin","client","onCompleted","data","set","signup","token","cache","reset","then","setTimeout","push","onError","error","console","onSubmit","setSubmitting","variables","getId","_secretKey","simpleCrypto","log","encrypt","marginTop","isSubmitting","marginLeft"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/components/Login/BasicLogin/Signup.js"],"sourcesContent":["import { useContext } from 'react';\nimport { Formik, Form, Field } from 'formik';\nimport { useMutation, useApolloClient } from '@apollo/client';\nimport { ButtonPrimary } from 'components/UI/Button/Button';\nimport { Input } from 'components/UI/Input';\nimport { UserContext } from 'context/UserContext';\nimport Router from 'next/router';\nimport Cookies from 'js-cookie';\nimport { COMPANY_NAME } from 'utils/config';\nimport { SIGNUP } from 'apis/User';\nimport SimpleCrypto from 'simple-crypto-js';\nimport * as S from './styled';\n\nconst initialValues = {\n  username: '',\n  fullname: '',\n  bio: '',\n  email: '',\n  password: '',\n};\nconst BACKEND_URL = 'http://54.147.200.132:4000';\nconst FRONTEND_URL = 'http://54.147.200.132:3000';\n\nconst SignUp = () => {\n  const { signin } = useContext(UserContext);\n  const client = useApolloClient();\n\n  const onCompleted = data => {\n    Cookies.set('token', data.signup.token);\n\n    signin(data.signup.token);\n    // Force a reload of all the current queries now that the user is logged in\n    client.cache.reset().then(() => {\n      setTimeout(function() {\n        Router.push(`/${COMPANY_NAME()}/general/general`);\n      }, 500);\n    });\n  };\n\n  const onError = error => {\n    // If you want to send error to external service?\n    console.error(error);\n  };\n\n  const [signup, { error }] = useMutation(SIGNUP, { onCompleted, onError });\n\n  const onSubmit = ({ fullname, username, email, password, bio }, { setSubmitting }) => {\n    setSubmitting(true);\n    signup({\n      variables: {\n        fullname,\n        username,\n        email,\n        password,\n        bio,\n      },\n    });\n    setSubmitting(false);\n  };\n\n  const getId = () => {\n    const _secretKey = 'ciscordsecret!@#';\n    const simpleCrypto = new SimpleCrypto(_secretKey);\n    console.log(simpleCrypto.encrypt(`${FRONTEND_URL}/ciscord/general/general`));\n  };\n  return (\n    <S.Container>\n      <S.Form>\n        <div />\n        <div style={{ marginTop: -150 }}>\n          <S.Heading>Sign Up</S.Heading>\n          <S.Paragraph>To continue, create an account</S.Paragraph>\n          <Formik initialValues={initialValues} onSubmit={onSubmit}>\n            {({ isSubmitting }) => (\n              <Form>\n                <Field\n                  type=\"text\"\n                  name=\"fullname\"\n                  label=\"Full name\"\n                  placeholder=\"Enter your full name\"\n                  component={Input}\n                />\n                <Field\n                  type=\"text\"\n                  name=\"username\"\n                  label=\"Username\"\n                  placeholder=\"Enter your username\"\n                  component={Input}\n                />\n                <Field\n                  type=\"email\"\n                  name=\"email\"\n                  label=\"Email\"\n                  placeholder=\"Enter email address\"\n                  component={Input}\n                />\n                <Field\n                  type=\"password\"\n                  name=\"password\"\n                  label=\"Password\"\n                  placeholder=\"********\"\n                  component={Input}\n                />\n                <Field\n                  type=\"text\"\n                  name=\"bio\"\n                  label=\"Bio\"\n                  placeholder=\"About yourselfs. You can edit this later\"\n                  component={Input}\n                />\n                <S.Footer>\n                  <ButtonPrimary\n                    type=\"submit\"\n                    name=\"button\"\n                    disabled={isSubmitting}\n                    style={{ marginLeft: 0 }}\n                  >\n                    {isSubmitting ? 'Creating an account' : 'Sign up'}\n                  </ButtonPrimary>\n                </S.Footer>\n              </Form>\n            )}\n          </Formik>\n          <button type=\"button\" name=\"button\" onClick={getId} style={{ marginLeft: 0 }}>\n            Get Code\n          </button>\n          {error && <p>Issue occurred while registering :(</p>}\n        </div>\n        <i />\n      </S.Form>\n      <S.Image />\n    </S.Container>\n  );\n};\n\nexport default SignUp;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}