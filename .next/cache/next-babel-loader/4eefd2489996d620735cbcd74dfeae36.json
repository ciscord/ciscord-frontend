{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nexport var isEmpty = function isEmpty(value) {\n  return value === undefined || value === null || typeof value === 'object' && _Object$keys(value).length === 0 || typeof value === 'string' && value.trim().length === 0;\n};\nexport var isOwner = function isOwner(user) {\n  if (isEmpty(user)) return false;\n  if (user.owner && user.owner === '1') return true;\n  return false;\n};\nexport var canManageCommunity = function canManageCommunity(user) {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  var hasPermission = false;\n  user.role.forEach(function (role) {\n    if (role.roleSettings.includes('manage_community')) {\n      hasPermission = true;\n    }\n  });\n  return hasPermission;\n};\nexport var canManageRole = function canManageRole(user) {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  var hasPermission = false;\n  user.role.forEach(function (role) {\n    if (role.roleSettings.includes('manage_role')) {\n      hasPermission = true;\n    }\n  });\n  return hasPermission;\n};\nexport var canManageChannel = function canManageChannel(user) {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  var hasPermission = false;\n  user.role.forEach(function (role) {\n    if (role.roleSettings.includes('manage_channel')) {\n      hasPermission = true;\n    }\n  });\n  return hasPermission;\n};\nexport var canDeleteMessage = function canDeleteMessage(user, message) {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  var hasPermission = false;\n  user.role.forEach(function (role) {\n    if (role.roleSettings.includes('delete_message')) {\n      hasPermission = true;\n    }\n  });\n  if (user.username === message.username) return true;\n  return hasPermission;\n};\nexport var canEditMessage = function canEditMessage(user, message) {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  var hasPermission = false;\n  if (user.username === message.username) return true;\n  return hasPermission;\n};","map":{"version":3,"names":["isEmpty","value","undefined","length","trim","isOwner","user","owner","canManageCommunity","hasPermission","role","forEach","roleSettings","includes","canManageRole","canManageChannel","canDeleteMessage","message","username","canEditMessage"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/utils/permission.js"],"sourcesContent":["export const isEmpty = value =>\n  value === undefined ||\n  value === null ||\n  (typeof value === 'object' && Object.keys(value).length === 0) ||\n  (typeof value === 'string' && value.trim().length === 0);\n\nexport const isOwner = user => {\n  if (isEmpty(user)) return false;\n  if (user.owner && user.owner === '1') return true;\n  return false;\n};\n\nexport const canManageCommunity = user => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('manage_community')) {\n      hasPermission = true;\n    }\n  });\n\n  return hasPermission;\n};\n\nexport const canManageRole = user => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('manage_role')) {\n      hasPermission = true;\n    }\n  });\n\n  return hasPermission;\n};\n\nexport const canManageChannel = user => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('manage_channel')) {\n      hasPermission = true;\n    }\n  });\n\n  return hasPermission;\n};\n\nexport const canDeleteMessage = (user, message) => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  let hasPermission = false;\n  user.role.forEach(role => {\n    if (role.roleSettings.includes('delete_message')) {\n      hasPermission = true;\n    }\n  });\n\n  if (user.username === message.username) return true;\n\n  return hasPermission;\n};\n\nexport const canEditMessage = (user, message) => {\n  if (isEmpty(user)) return false;\n  if (isOwner(user)) return true;\n  const hasPermission = false;\n\n  if (user.username === message.username) return true;\n\n  return hasPermission;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}