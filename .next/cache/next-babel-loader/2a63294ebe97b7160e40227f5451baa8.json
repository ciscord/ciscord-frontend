{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport { MoreIcon } from 'components/UI/Icons';\nimport MorePopup from './MorePopup';\nimport * as S from './Member.styled';\nexport default (function (_ref) {\n  var user = _ref.user,\n    roles = _ref.roles,\n    toggleUserRole = _ref.toggleUserRole;\n  return __jsx(S.Member, {\n    key: user.id\n  }, __jsx(S.User, null, __jsx(S.Avatar, {\n    src: user.image,\n    name: user.username\n  }), __jsx(S.UserInfo, null, __jsx(S.Name, null, user.fullname), __jsx(S.OnlineStatus, {\n    online: user.isOnline\n  }), __jsx(S.Username, null, \"@\".concat(user.username)))), __jsx(S.Options, null, __jsx(Roles, {\n    user: user\n  }), __jsx(More, {\n    user: user,\n    roles: roles,\n    toggleUserRole: toggleUserRole\n  })));\n});\nvar Roles = function Roles(_ref2) {\n  var user = _ref2.user;\n  var isOwner = user.owner === '1';\n  return isOwner ? __jsx(S.Role, null, __jsx(S.RoleColor, {\n    owner: true\n  }), \"Owner\") : user.role.sort().map(function (role) {\n    return __jsx(S.Role, {\n      key: role.id\n    }, __jsx(S.RoleColor, {\n      color: role.color\n    }), role.title);\n  });\n};\nvar More = function More(_ref3) {\n  var user = _ref3.user,\n    roles = _ref3.roles,\n    toggleUserRole = _ref3.toggleUserRole;\n  var _useState = useState(false),\n    showPopup = _useState[0],\n    setShowPopup = _useState[1];\n  var isOwner = user.owner === '1';\n  useEffect(function () {\n    var listener = document.body.addEventListener('click', function (event) {\n      var popupContainer = event.target.closest('.vs-popup');\n      var moreIconContainer = event.target.closest('.vs-more-icon');\n      if (!popupContainer && !moreIconContainer) {\n        setShowPopup(false);\n      }\n    });\n    return function () {\n      return document.body.removeEventListener('click', listener);\n    };\n  }, []);\n  return !isOwner && __jsx(React.Fragment, null, __jsx(MoreIcon, {\n    active: showPopup,\n    onClick: function onClick() {\n      return setShowPopup(!showPopup);\n    },\n    style: {\n      marginLeft: 24,\n      transform: 'rotate(-90deg)'\n    }\n  }), __jsx(MorePopup, {\n    show: showPopup,\n    close: function close() {\n      return setShowPopup(false);\n    },\n    user: user,\n    roles: roles,\n    toggleUserRole: toggleUserRole\n  }));\n};","map":{"version":3,"names":["useState","useEffect","MoreIcon","MorePopup","S","user","roles","toggleUserRole","id","image","username","fullname","isOnline","Roles","isOwner","owner","role","sort","map","color","title","More","showPopup","setShowPopup","listener","document","body","addEventListener","event","popupContainer","target","closest","moreIconContainer","removeEventListener","marginLeft","transform"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/components/Settings/Members/Member/Member.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { MoreIcon } from 'components/UI/Icons';\nimport MorePopup from './MorePopup';\nimport * as S from './Member.styled';\n\nexport default ({ user, roles, toggleUserRole }) => (\n  <S.Member key={user.id}>\n    <S.User>\n      <S.Avatar src={user.image} name={user.username} />\n      <S.UserInfo>\n        <S.Name>{user.fullname}</S.Name>\n        <S.OnlineStatus online={user.isOnline} />\n        <S.Username>{`@${user.username}`}</S.Username>\n      </S.UserInfo>\n    </S.User>\n    <S.Options>\n      <Roles user={user} />\n      <More user={user} roles={roles} toggleUserRole={toggleUserRole} />\n    </S.Options>\n  </S.Member>\n);\n\nconst Roles = ({ user }) => {\n  const isOwner = user.owner === '1';\n\n  return isOwner ? (\n    <S.Role>\n      <S.RoleColor owner />\n      Owner\n    </S.Role>\n  ) : (\n    user.role.sort().map(role => (\n      <S.Role key={role.id}>\n        <S.RoleColor color={role.color} />\n        {role.title}\n      </S.Role>\n    ))\n  );\n};\n\nconst More = ({ user, roles, toggleUserRole }) => {\n  const [showPopup, setShowPopup] = useState(false);\n  const isOwner = user.owner === '1';\n\n  useEffect(() => {\n    const listener = document.body.addEventListener('click', event => {\n      const popupContainer = event.target.closest('.vs-popup');\n      const moreIconContainer = event.target.closest('.vs-more-icon');\n      if (!popupContainer && !moreIconContainer) {\n        setShowPopup(false);\n      }\n    });\n    return () => document.body.removeEventListener('click', listener);\n  }, []);\n\n  return (\n    !isOwner && (\n      <>\n        <MoreIcon\n          active={showPopup}\n          onClick={() => setShowPopup(!showPopup)}\n          style={{ marginLeft: 24, transform: 'rotate(-90deg)' }}\n        />\n        <MorePopup\n          show={showPopup}\n          close={() => setShowPopup(false)}\n          user={user}\n          roles={roles}\n          toggleUserRole={toggleUserRole}\n        />\n      </>\n    )\n  );\n};\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,QAAQ,QAAQ,qBAAqB;AAC9C,OAAOC,SAAS,MAAM,aAAa;AACnC,OAAO,KAAKC,CAAC,MAAM,iBAAiB;AAEpC,gBAAe;EAAA,IAAGC,IAAI,QAAJA,IAAI;IAAEC,KAAK,QAALA,KAAK;IAAEC,cAAc,QAAdA,cAAc;EAAA,OAC3C,MAAC,CAAC,CAAC,MAAM;IAAC,GAAG,EAAEF,IAAI,CAACG;EAAG,GACrB,MAAC,CAAC,CAAC,IAAI,QACL,MAAC,CAAC,CAAC,MAAM;IAAC,GAAG,EAAEH,IAAI,CAACI,KAAM;IAAC,IAAI,EAAEJ,IAAI,CAACK;EAAS,EAAG,EAClD,MAAC,CAAC,CAAC,QAAQ,QACT,MAAC,CAAC,CAAC,IAAI,QAAEL,IAAI,CAACM,QAAQ,CAAU,EAChC,MAAC,CAAC,CAAC,YAAY;IAAC,MAAM,EAAEN,IAAI,CAACO;EAAS,EAAG,EACzC,MAAC,CAAC,CAAC,QAAQ,mBAAMP,IAAI,CAACK,QAAQ,EAAgB,CACnC,CACN,EACT,MAAC,CAAC,CAAC,OAAO,QACR,MAAC,KAAK;IAAC,IAAI,EAAEL;EAAK,EAAG,EACrB,MAAC,IAAI;IAAC,IAAI,EAAEA,IAAK;IAAC,KAAK,EAAEC,KAAM;IAAC,cAAc,EAAEC;EAAe,EAAG,CACxD,CACH;AAAA,CACZ;AAED,IAAMM,KAAK,GAAG,SAARA,KAAK,QAAiB;EAAA,IAAXR,IAAI,SAAJA,IAAI;EACnB,IAAMS,OAAO,GAAGT,IAAI,CAACU,KAAK,KAAK,GAAG;EAElC,OAAOD,OAAO,GACZ,MAAC,CAAC,CAAC,IAAI,QACL,MAAC,CAAC,CAAC,SAAS;IAAC,KAAK;EAAA,EAAG,UAEd,GAETT,IAAI,CAACW,IAAI,CAACC,IAAI,EAAE,CAACC,GAAG,CAAC,UAAAF,IAAI;IAAA,OACvB,MAAC,CAAC,CAAC,IAAI;MAAC,GAAG,EAAEA,IAAI,CAACR;IAAG,GACnB,MAAC,CAAC,CAAC,SAAS;MAAC,KAAK,EAAEQ,IAAI,CAACG;IAAM,EAAG,EACjCH,IAAI,CAACI,KAAK,CACJ;EAAA,CACV,CACF;AACH,CAAC;AAED,IAAMC,IAAI,GAAG,SAAPA,IAAI,QAAwC;EAAA,IAAlChB,IAAI,SAAJA,IAAI;IAAEC,KAAK,SAALA,KAAK;IAAEC,cAAc,SAAdA,cAAc;EACzC,gBAAkCP,QAAQ,CAAC,KAAK,CAAC;IAA1CsB,SAAS;IAAEC,YAAY;EAC9B,IAAMT,OAAO,GAAGT,IAAI,CAACU,KAAK,KAAK,GAAG;EAElCd,SAAS,CAAC,YAAM;IACd,IAAMuB,QAAQ,GAAGC,QAAQ,CAACC,IAAI,CAACC,gBAAgB,CAAC,OAAO,EAAE,UAAAC,KAAK,EAAI;MAChE,IAAMC,cAAc,GAAGD,KAAK,CAACE,MAAM,CAACC,OAAO,CAAC,WAAW,CAAC;MACxD,IAAMC,iBAAiB,GAAGJ,KAAK,CAACE,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC;MAC/D,IAAI,CAACF,cAAc,IAAI,CAACG,iBAAiB,EAAE;QACzCT,YAAY,CAAC,KAAK,CAAC;MACrB;IACF,CAAC,CAAC;IACF,OAAO;MAAA,OAAME,QAAQ,CAACC,IAAI,CAACO,mBAAmB,CAAC,OAAO,EAAET,QAAQ,CAAC;IAAA;EACnE,CAAC,EAAE,EAAE,CAAC;EAEN,OACE,CAACV,OAAO,IACN,4BACE,MAAC,QAAQ;IACP,MAAM,EAAEQ,SAAU;IAClB,OAAO,EAAE;MAAA,OAAMC,YAAY,CAAC,CAACD,SAAS,CAAC;IAAA,CAAC;IACxC,KAAK,EAAE;MAAEY,UAAU,EAAE,EAAE;MAAEC,SAAS,EAAE;IAAiB;EAAE,EACvD,EACF,MAAC,SAAS;IACR,IAAI,EAAEb,SAAU;IAChB,KAAK,EAAE;MAAA,OAAMC,YAAY,CAAC,KAAK,CAAC;IAAA,CAAC;IACjC,IAAI,EAAElB,IAAK;IACX,KAAK,EAAEC,KAAM;IACb,cAAc,EAAEC;EAAe,EAC/B,CAEL;AAEL,CAAC"},"metadata":{},"sourceType":"module"}