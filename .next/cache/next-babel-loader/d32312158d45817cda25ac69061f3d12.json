{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext } from 'react';\nimport { Formik, Form, Field } from 'formik';\nimport { useMutation, useApolloClient } from '@apollo/client';\nimport { ButtonPrimary } from 'components/UI/Button/Button';\nimport { Input } from 'components/UI/Input';\nimport { UserContext } from 'context/UserContext';\nimport Router from 'next/router';\nimport Cookies from 'js-cookie';\nimport { COMPANY_NAME } from 'utils/config';\nimport { SIGNUP } from 'apis/User';\nimport SimpleCrypto from 'simple-crypto-js';\nimport * as S from './styled';\nvar initialValues = {\n  username: '',\n  fullname: '',\n  bio: '',\n  email: '',\n  password: ''\n};\nvar BACKEND_URL = 'https://biznessapps.org';\nvar FRONTEND_URL = 'https://biznessapps.org';\nvar SignUp = function SignUp() {\n  var _useContext = useContext(UserContext),\n    signin = _useContext.signin;\n  var client = useApolloClient();\n  var onCompleted = function onCompleted(data) {\n    Cookies.set('token', data.signup.token);\n    signin(data.signup.token);\n    // Force a reload of all the current queries now that the user is logged in\n    client.cache.reset().then(function () {\n      setTimeout(function () {\n        Router.push(\"/\".concat(COMPANY_NAME(), \"/general/general\"));\n      }, 500);\n    });\n  };\n  var onError = function onError(error) {\n    // If you want to send error to external service?\n    console.error(error);\n  };\n  var _useMutation = useMutation(SIGNUP, {\n      onCompleted: onCompleted,\n      onError: onError\n    }),\n    _useMutation2 = _slicedToArray(_useMutation, 2),\n    signup = _useMutation2[0],\n    error = _useMutation2[1].error;\n  var onSubmit = function onSubmit(_ref, _ref2) {\n    var fullname = _ref.fullname,\n      username = _ref.username,\n      email = _ref.email,\n      password = _ref.password,\n      bio = _ref.bio;\n    var setSubmitting = _ref2.setSubmitting;\n    setSubmitting(true);\n    signup({\n      variables: {\n        fullname: fullname,\n        username: username,\n        email: email,\n        password: password,\n        bio: bio\n      }\n    });\n    setSubmitting(false);\n  };\n  var getId = function getId() {\n    var _secretKey = 'ciscordsecret!@#';\n    var simpleCrypto = new SimpleCrypto(_secretKey);\n    console.log(simpleCrypto.encrypt(\"\".concat(FRONTEND_URL, \"/ciscord/general/general\")));\n  };\n  return __jsx(S.Container, null, __jsx(S.Form, null, __jsx(\"div\", null), __jsx(\"div\", {\n    style: {\n      marginTop: -150\n    }\n  }, __jsx(S.Heading, null, \"Sign Up\"), __jsx(S.Paragraph, null, \"To continue, create an account\"), __jsx(Formik, {\n    initialValues: initialValues,\n    onSubmit: onSubmit\n  }, function (_ref3) {\n    var isSubmitting = _ref3.isSubmitting;\n    return __jsx(Form, null, __jsx(Field, {\n      type: \"text\",\n      name: \"fullname\",\n      label: \"Full name\",\n      placeholder: \"Enter your full name\",\n      component: Input\n    }), __jsx(Field, {\n      type: \"text\",\n      name: \"username\",\n      label: \"Username\",\n      placeholder: \"Enter your username\",\n      component: Input\n    }), __jsx(Field, {\n      type: \"email\",\n      name: \"email\",\n      label: \"Email\",\n      placeholder: \"Enter email address\",\n      component: Input\n    }), __jsx(Field, {\n      type: \"password\",\n      name: \"password\",\n      label: \"Password\",\n      placeholder: \"********\",\n      component: Input\n    }), __jsx(Field, {\n      type: \"text\",\n      name: \"bio\",\n      label: \"Bio\",\n      placeholder: \"About yourselfs. You can edit this later\",\n      component: Input\n    }), __jsx(S.Footer, null, __jsx(ButtonPrimary, {\n      type: \"submit\",\n      name: \"button\",\n      disabled: isSubmitting,\n      style: {\n        marginLeft: 0\n      }\n    }, isSubmitting ? 'Creating an account' : 'Sign up')));\n  }), __jsx(\"button\", {\n    type: \"button\",\n    name: \"button\",\n    onClick: getId,\n    style: {\n      marginLeft: 0\n    }\n  }, \"Get Code\"), error && __jsx(\"p\", null, \"Issue occurred while registering :(\")), __jsx(\"i\", null)), __jsx(S.Image, null));\n};\nexport default SignUp;","map":{"version":3,"names":["useContext","Formik","Form","Field","useMutation","useApolloClient","ButtonPrimary","Input","UserContext","Router","Cookies","COMPANY_NAME","SIGNUP","SimpleCrypto","S","initialValues","username","fullname","bio","email","password","BACKEND_URL","FRONTEND_URL","SignUp","signin","client","onCompleted","data","set","signup","token","cache","reset","then","setTimeout","push","onError","error","console","onSubmit","setSubmitting","variables","getId","_secretKey","simpleCrypto","log","encrypt","marginTop","isSubmitting","marginLeft"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/components/Login/BasicLogin/Signup.js"],"sourcesContent":["import { useContext } from 'react';\nimport { Formik, Form, Field } from 'formik';\nimport { useMutation, useApolloClient } from '@apollo/client';\nimport { ButtonPrimary } from 'components/UI/Button/Button';\nimport { Input } from 'components/UI/Input';\nimport { UserContext } from 'context/UserContext';\nimport Router from 'next/router';\nimport Cookies from 'js-cookie';\nimport { COMPANY_NAME } from 'utils/config';\nimport { SIGNUP } from 'apis/User';\nimport SimpleCrypto from 'simple-crypto-js';\nimport * as S from './styled';\n\nconst initialValues = {\n  username: '',\n  fullname: '',\n  bio: '',\n  email: '',\n  password: '',\n};\nconst BACKEND_URL = 'https://biznessapps.org';\nconst FRONTEND_URL = 'https://biznessapps.org';\n\nconst SignUp = () => {\n  const { signin } = useContext(UserContext);\n  const client = useApolloClient();\n\n  const onCompleted = data => {\n    Cookies.set('token', data.signup.token);\n\n    signin(data.signup.token);\n    // Force a reload of all the current queries now that the user is logged in\n    client.cache.reset().then(() => {\n      setTimeout(function() {\n        Router.push(`/${COMPANY_NAME()}/general/general`);\n      }, 500);\n    });\n  };\n\n  const onError = error => {\n    // If you want to send error to external service?\n    console.error(error);\n  };\n\n  const [signup, { error }] = useMutation(SIGNUP, { onCompleted, onError });\n\n  const onSubmit = ({ fullname, username, email, password, bio }, { setSubmitting }) => {\n    setSubmitting(true);\n    signup({\n      variables: {\n        fullname,\n        username,\n        email,\n        password,\n        bio,\n      },\n    });\n    setSubmitting(false);\n  };\n\n  const getId = () => {\n    const _secretKey = 'ciscordsecret!@#';\n    const simpleCrypto = new SimpleCrypto(_secretKey);\n    console.log(simpleCrypto.encrypt(`${FRONTEND_URL}/ciscord/general/general`));\n  };\n  return (\n    <S.Container>\n      <S.Form>\n        <div />\n        <div style={{ marginTop: -150 }}>\n          <S.Heading>Sign Up</S.Heading>\n          <S.Paragraph>To continue, create an account</S.Paragraph>\n          <Formik initialValues={initialValues} onSubmit={onSubmit}>\n            {({ isSubmitting }) => (\n              <Form>\n                <Field\n                  type=\"text\"\n                  name=\"fullname\"\n                  label=\"Full name\"\n                  placeholder=\"Enter your full name\"\n                  component={Input}\n                />\n                <Field\n                  type=\"text\"\n                  name=\"username\"\n                  label=\"Username\"\n                  placeholder=\"Enter your username\"\n                  component={Input}\n                />\n                <Field\n                  type=\"email\"\n                  name=\"email\"\n                  label=\"Email\"\n                  placeholder=\"Enter email address\"\n                  component={Input}\n                />\n                <Field\n                  type=\"password\"\n                  name=\"password\"\n                  label=\"Password\"\n                  placeholder=\"********\"\n                  component={Input}\n                />\n                <Field\n                  type=\"text\"\n                  name=\"bio\"\n                  label=\"Bio\"\n                  placeholder=\"About yourselfs. You can edit this later\"\n                  component={Input}\n                />\n                <S.Footer>\n                  <ButtonPrimary\n                    type=\"submit\"\n                    name=\"button\"\n                    disabled={isSubmitting}\n                    style={{ marginLeft: 0 }}\n                  >\n                    {isSubmitting ? 'Creating an account' : 'Sign up'}\n                  </ButtonPrimary>\n                </S.Footer>\n              </Form>\n            )}\n          </Formik>\n          <button type=\"button\" name=\"button\" onClick={getId} style={{ marginLeft: 0 }}>\n            Get Code\n          </button>\n          {error && <p>Issue occurred while registering :(</p>}\n        </div>\n        <i />\n      </S.Form>\n      <S.Image />\n    </S.Container>\n  );\n};\n\nexport default SignUp;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}