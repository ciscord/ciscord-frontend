{"ast":null,"code":"import _Object$setPrototypeOf from \"@babel/runtime-corejs2/core-js/object/set-prototype-of\";\nimport _Object$getPrototypeOf from \"@babel/runtime-corejs2/core-js/object/get-prototype-of\";\nimport _Object$create from \"@babel/runtime-corejs2/core-js/object/create\";\nimport _Symbol from \"@babel/runtime-corejs2/core-js/symbol\";\nimport _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Object$entries2 from \"@babel/runtime-corejs2/core-js/object/entries\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = _Object$defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof _Symbol ? _Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return _Object$defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = _Object$create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = _Object$getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = _Object$create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return _Object$setPrototypeOf ? _Object$setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = _Object$create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = _Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { useEffect, useState } from 'react';\nimport { Formik, Form, Field } from 'formik';\nimport { useMutation, useLazyQuery } from '@apollo/client';\nimport { GET_ROLE, CREATE_ROLE, UPDATE_ROLE, DELETE_ROLE } from 'apis/Role';\nimport Popup from 'components/UI/Popup';\nimport { Input, ColorInput, ToggleInput } from 'components/UI/Input';\nimport { ButtonPrimary, ButtonSubtle } from 'components/UI/Button';\nimport { PlusIcon, MoreIcon } from 'components/UI/Icons';\nimport * as S from './Roles.styled';\n\n// import { useRouter } from 'next/router';\n// import { COMPANY_NAME } from 'utils/config';\n// import Popup from 'components/UI/Popup';\n// import plusIcon from 'public/icons/plus3.svg';\n// import * as S from './MorePopup.styled';\n\n// const MorePopup = ({ opened, close }) => {\n//   const {\n//     query: { community: communityUrl },\n//     push,\n//   } = useRouter();\n\n//   const items = [\n//     {\n//       label: 'New channel',\n//       icon: (\n//         <S.PlusIcon>\n//           <use xlinkHref={`${plusIcon}#icon-plus3`} />\n//         </S.PlusIcon>\n//       ),\n//       onClick: () =>\n//         push(\n//           `/[company]/[community]/new-channel`,\n//           `/${COMPANY_NAME()}/${communityUrl}/new-channel`,\n//           { shallow: true }\n//         ),\n//     },\n//   ];\n//   return <Popup opened={opened} close={close} items={items} />;\n// };\n\n// export default MorePopup;\n\nvar permissions = [{\n  key: 'manage_community',\n  label: 'Manage communities',\n  tip: 'Can member create, update and delete communities?'\n}, {\n  key: 'manage_channel',\n  label: 'Manage channels',\n  tip: 'Can member create, update and delete channels?'\n}, {\n  key: 'manage_role',\n  label: 'Manage roles',\n  tip: 'Can member manage roles?'\n}, {\n  key: 'chat_permission',\n  label: 'Chat permission',\n  tip: 'Can member type in chat?'\n}, {\n  key: 'upload_image',\n  label: 'Upload images',\n  tip: 'Can member upload images?'\n}, {\n  key: 'post_links',\n  label: 'Post links',\n  tip: 'Can member post links?'\n}, {\n  key: 'delete_message',\n  label: 'Delete messages',\n  tip: 'Can member delete messages'\n}];\nvar defaultPermissions = {\n  manage_community: false,\n  manage_channel: false,\n  manage_role: false,\n  chat_permission: false,\n  upload_image: false,\n  post_links: false,\n  delete_message: false\n};\nexport default (function (_ref) {\n  var newRole = _ref.newRole;\n  var _useState = useState(null),\n    selectedRole = _useState[0],\n    setRole = _useState[1];\n  var _useState2 = useState(false),\n    showMorePopup = _useState2[0],\n    setShowMorePopup = _useState2[1];\n  var _useState3 = useState({}),\n    permissionsObject = _useState3[0],\n    setPermissionObject = _useState3[1];\n  var _useLazyQuery = useLazyQuery(GET_ROLE),\n    _useLazyQuery2 = _slicedToArray(_useLazyQuery, 2),\n    getRoles = _useLazyQuery2[0],\n    _useLazyQuery2$ = _useLazyQuery2[1],\n    _useLazyQuery2$$data = _useLazyQuery2$.data,\n    _useLazyQuery2$$data2 = _useLazyQuery2$$data === void 0 ? {} : _useLazyQuery2$$data,\n    _useLazyQuery2$$data3 = _useLazyQuery2$$data2.roles,\n    roles = _useLazyQuery2$$data3 === void 0 ? [] : _useLazyQuery2$$data3,\n    rolesLoading = _useLazyQuery2$.loading;\n  var _useMutation = useMutation(CREATE_ROLE, {\n      update: function update(cache, _ref2) {\n        var role = _ref2.data.createRole;\n        var _cache$readQuery = cache.readQuery({\n            query: GET_ROLE\n          }),\n          cachedRoles = _cache$readQuery.roles;\n        cache.writeQuery({\n          query: GET_ROLE,\n          data: {\n            roles: cachedRoles.concat([role])\n          }\n        });\n      }\n    }),\n    _useMutation2 = _slicedToArray(_useMutation, 1),\n    createRole = _useMutation2[0];\n  var _useMutation3 = useMutation(UPDATE_ROLE, {}),\n    _useMutation4 = _slicedToArray(_useMutation3, 1),\n    updateRole = _useMutation4[0];\n  var _useMutation5 = useMutation(DELETE_ROLE, {\n      update: function update(cache, _ref3) {\n        var deletedRole = _ref3.data.deleteRole;\n        var _cache$readQuery2 = cache.readQuery({\n            query: GET_ROLE\n          }),\n          cachedRoles = _cache$readQuery2.roles;\n        cache.writeQuery({\n          query: GET_ROLE,\n          data: {\n            roles: cachedRoles.filter(function (e) {\n              return e.id !== deletedRole.id;\n            })\n          }\n        });\n      }\n    }),\n    _useMutation6 = _slicedToArray(_useMutation5, 1),\n    deleteRole = _useMutation6[0];\n  useEffect(function () {\n    getRoles();\n  }, []);\n  useEffect(function () {\n    if (roles.length > 0 && !newRole) {\n      setRole(roles[0]);\n    }\n  }, [roles.length]);\n  var transformPermissionsToObject = function transformPermissionsToObject() {\n    if (selectedRole) {\n      var newPermissionObject = {};\n      var permissionsString = selectedRole.roleSettings;\n      permissions.forEach(function (p) {\n        if (permissionsString.includes(p.key)) {\n          newPermissionObject[p.key] = true;\n        } else {\n          newPermissionObject[p.key] = false;\n        }\n      });\n      return newPermissionObject;\n    }\n    return defaultPermissions;\n  };\n  var transformPermissionsToString = function transformPermissionsToString(values) {\n    var permissionsArray = [];\n\n    // eslint-disable-next-line\n    for (var _i = 0, _Object$entries = _Object$entries2(values); _i < _Object$entries.length; _i++) {\n      var _Object$entries$_i2 = _slicedToArray(_Object$entries[_i], 2),\n        key = _Object$entries$_i2[0],\n        value = _Object$entries$_i2[1];\n      var isPermissionKey = key !== 'title' && key !== 'color';\n\n      // for permissions\n      if (isPermissionKey && (value === true || value[0] === 'on')) {\n        permissionsArray.push(key);\n      }\n    }\n    return permissionsArray.toString();\n  };\n  useEffect(function () {\n    setPermissionObject(transformPermissionsToObject(selectedRole));\n  }, [selectedRole]);\n  var onSubmit = function onSubmit(values) {\n    var roleSettings, payload, _await$updateRole2, updatedRole, _await$createRole2, createdRole;\n    return _regeneratorRuntime().async(function onSubmit$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          roleSettings = transformPermissionsToString(values);\n          payload = {\n            title: values.title,\n            color: values.color,\n            roleSettings: roleSettings\n          };\n          if (!(selectedRole !== null)) {\n            _context.next = 10;\n            break;\n          }\n          _context.next = 5;\n          return _regeneratorRuntime().awrap(updateRole({\n            variables: _objectSpread({\n              id: selectedRole.id\n            }, payload),\n            errorPolicy: 'all'\n          }));\n        case 5:\n          _await$updateRole2 = _context.sent;\n          updatedRole = _await$updateRole2.data.updateRole;\n          setRole(updatedRole);\n          _context.next = 15;\n          break;\n        case 10:\n          _context.next = 12;\n          return _regeneratorRuntime().awrap(createRole({\n            variables: payload,\n            errorPolicy: 'all'\n          }));\n        case 12:\n          _await$createRole2 = _context.sent;\n          createdRole = _await$createRole2.data.createRole;\n          setRole(createdRole);\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }, null, null, null, _Promise);\n  };\n  if (rolesLoading) {\n    return __jsx(\"div\", null);\n  }\n  return __jsx(S.Container, null, __jsx(S.Header, null, __jsx(S.Roles, null, roles.map(function (role) {\n    return __jsx(S.Role, {\n      key: role.id,\n      active: selectedRole && selectedRole.title === role.title,\n      onClick: function onClick() {\n        return setRole(role);\n      }\n    }, role.title);\n  }), __jsx(S.Role, {\n    active: !selectedRole,\n    onClick: function onClick() {\n      return setRole(null);\n    }\n  }, \"New role\")), __jsx(S.Actions, null, __jsx(S.PlusIconWrapper, {\n    onClick: function onClick() {\n      return setRole(null);\n    }\n  }, __jsx(PlusIcon, {\n    active: selectedRole === null\n  })), selectedRole && __jsx(React.Fragment, null, __jsx(MoreIcon, {\n    active: showMorePopup,\n    onClick: function onClick() {\n      return setShowMorePopup(!showMorePopup);\n    }\n  }), __jsx(Popup, {\n    opened: showMorePopup,\n    close: function close() {\n      return setShowMorePopup(false);\n    },\n    items: [{\n      label: 'Delete role',\n      onClick: function onClick() {\n        deleteRole({\n          variables: {\n            id: selectedRole.id\n          }\n        });\n        setRole(roles[0]);\n        setShowMorePopup(false);\n      }\n    }]\n  })))), __jsx(S.Body, null, __jsx(Formik, {\n    initialValues: function () {\n      if (selectedRole !== null) {\n        return _objectSpread({\n          title: selectedRole.title,\n          color: selectedRole.color\n        }, permissionsObject);\n      }\n      return _objectSpread({\n        title: '',\n        color: '#19BC9B'\n      }, permissionsObject);\n    }(),\n    enableReinitialize: true,\n    onSubmit: onSubmit\n  }, function (_ref4) {\n    var isSubmitting = _ref4.isSubmitting;\n    return __jsx(Form, {\n      style: {\n        paddingBottom: 76,\n        paddingTop: 73\n      }\n    }, __jsx(Field, {\n      type: \"text\",\n      name: \"title\",\n      label: \"Role name\",\n      placeholder: \"Enter role name\",\n      component: Input\n    }), __jsx(Field, {\n      label: \"Role color\",\n      name: \"color\",\n      component: ColorInput\n    }), __jsx(S.SectionTitle, null, \"General permissions\"), permissions.map(function (permission) {\n      return __jsx(Field, {\n        key: permission.key,\n        type: \"text\",\n        name: permission.key,\n        label: permission.label,\n        tip: permission.tip,\n        component: ToggleInput\n      });\n    }), __jsx(S.Footer, null, __jsx(ButtonPrimary, {\n      type: \"submit\",\n      name: \"button\",\n      disabled: isSubmitting,\n      style: {\n        marginRight: 10\n      }\n    }, selectedRole === null ? 'Create' : 'Save'), selectedRole === null && __jsx(ButtonSubtle, {\n      type: \"submit\",\n      name: \"button\",\n      onClick: function onClick() {\n        setRole(roles[0]);\n      }\n    }, \"Cancel\")));\n  })));\n});","map":{"version":3,"names":["useEffect","useState","Formik","Form","Field","useMutation","useLazyQuery","GET_ROLE","CREATE_ROLE","UPDATE_ROLE","DELETE_ROLE","Popup","Input","ColorInput","ToggleInput","ButtonPrimary","ButtonSubtle","PlusIcon","MoreIcon","S","permissions","key","label","tip","defaultPermissions","manage_community","manage_channel","manage_role","chat_permission","upload_image","post_links","delete_message","newRole","selectedRole","setRole","showMorePopup","setShowMorePopup","permissionsObject","setPermissionObject","getRoles","data","roles","rolesLoading","loading","update","cache","role","createRole","readQuery","query","cachedRoles","writeQuery","concat","updateRole","deletedRole","deleteRole","filter","e","id","length","transformPermissionsToObject","newPermissionObject","permissionsString","roleSettings","forEach","p","includes","transformPermissionsToString","values","permissionsArray","value","isPermissionKey","push","toString","onSubmit","payload","title","color","variables","errorPolicy","updatedRole","createdRole","map","onClick","isSubmitting","paddingBottom","paddingTop","permission","marginRight"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/components/Settings/Roles/Roles.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Formik, Form, Field } from 'formik';\n\nimport { useMutation, useLazyQuery } from '@apollo/client';\nimport { GET_ROLE, CREATE_ROLE, UPDATE_ROLE, DELETE_ROLE } from 'apis/Role';\n\nimport Popup from 'components/UI/Popup';\nimport { Input, ColorInput, ToggleInput } from 'components/UI/Input';\nimport { ButtonPrimary, ButtonSubtle } from 'components/UI/Button';\nimport { PlusIcon, MoreIcon } from 'components/UI/Icons';\n\nimport * as S from './Roles.styled';\n\n// import { useRouter } from 'next/router';\n// import { COMPANY_NAME } from 'utils/config';\n// import Popup from 'components/UI/Popup';\n// import plusIcon from 'public/icons/plus3.svg';\n// import * as S from './MorePopup.styled';\n\n// const MorePopup = ({ opened, close }) => {\n//   const {\n//     query: { community: communityUrl },\n//     push,\n//   } = useRouter();\n\n//   const items = [\n//     {\n//       label: 'New channel',\n//       icon: (\n//         <S.PlusIcon>\n//           <use xlinkHref={`${plusIcon}#icon-plus3`} />\n//         </S.PlusIcon>\n//       ),\n//       onClick: () =>\n//         push(\n//           `/[company]/[community]/new-channel`,\n//           `/${COMPANY_NAME()}/${communityUrl}/new-channel`,\n//           { shallow: true }\n//         ),\n//     },\n//   ];\n//   return <Popup opened={opened} close={close} items={items} />;\n// };\n\n// export default MorePopup;\n\nconst permissions = [\n  {\n    key: 'manage_community',\n    label: 'Manage communities',\n    tip: 'Can member create, update and delete communities?',\n  },\n  {\n    key: 'manage_channel',\n    label: 'Manage channels',\n    tip: 'Can member create, update and delete channels?',\n  },\n  {\n    key: 'manage_role',\n    label: 'Manage roles',\n    tip: 'Can member manage roles?',\n  },\n  {\n    key: 'chat_permission',\n    label: 'Chat permission',\n    tip: 'Can member type in chat?',\n  },\n  {\n    key: 'upload_image',\n    label: 'Upload images',\n    tip: 'Can member upload images?',\n  },\n  {\n    key: 'post_links',\n    label: 'Post links',\n    tip: 'Can member post links?',\n  },\n  {\n    key: 'delete_message',\n    label: 'Delete messages',\n    tip: 'Can member delete messages',\n  },\n];\n\nconst defaultPermissions = {\n  manage_community: false,\n  manage_channel: false,\n  manage_role: false,\n  chat_permission: false,\n  upload_image: false,\n  post_links: false,\n  delete_message: false,\n};\n\nexport default ({ newRole }) => {\n  const [selectedRole, setRole] = useState(null);\n  const [showMorePopup, setShowMorePopup] = useState(false);\n  const [permissionsObject, setPermissionObject] = useState({});\n  const [getRoles, { data: { roles = [] } = {}, loading: rolesLoading }] = useLazyQuery(GET_ROLE);\n\n  const [createRole] = useMutation(CREATE_ROLE, {\n    update(cache, { data: { createRole: role } }) {\n      const { roles: cachedRoles } = cache.readQuery({ query: GET_ROLE });\n      cache.writeQuery({\n        query: GET_ROLE,\n        data: { roles: cachedRoles.concat([role]) },\n      });\n    },\n  });\n  const [updateRole] = useMutation(UPDATE_ROLE, {});\n  const [deleteRole] = useMutation(DELETE_ROLE, {\n    update(cache, { data: { deleteRole: deletedRole } }) {\n      const { roles: cachedRoles } = cache.readQuery({ query: GET_ROLE });\n      cache.writeQuery({\n        query: GET_ROLE,\n        data: { roles: cachedRoles.filter(e => e.id !== deletedRole.id) },\n      });\n    },\n  });\n\n  useEffect(() => {\n    getRoles();\n  }, []);\n\n  useEffect(() => {\n    if (roles.length > 0 && !newRole) {\n      setRole(roles[0]);\n    }\n  }, [roles.length]);\n\n  const transformPermissionsToObject = () => {\n    if (selectedRole) {\n      const newPermissionObject = {};\n      const permissionsString = selectedRole.roleSettings;\n\n      permissions.forEach(p => {\n        if (permissionsString.includes(p.key)) {\n          newPermissionObject[p.key] = true;\n        } else {\n          newPermissionObject[p.key] = false;\n        }\n      });\n\n      return newPermissionObject;\n    }\n    return defaultPermissions;\n  };\n\n  const transformPermissionsToString = values => {\n    const permissionsArray = [];\n\n    // eslint-disable-next-line\n    for (const [key, value] of Object.entries(values)) {\n      const isPermissionKey = key !== 'title' && key !== 'color';\n\n      // for permissions\n      if (isPermissionKey && (value === true || value[0] === 'on')) {\n        permissionsArray.push(key);\n      }\n    }\n\n    return permissionsArray.toString();\n  };\n\n  useEffect(() => {\n    setPermissionObject(transformPermissionsToObject(selectedRole));\n  }, [selectedRole]);\n\n  const onSubmit = async values => {\n    const roleSettings = transformPermissionsToString(values);\n\n    const payload = {\n      title: values.title,\n      color: values.color,\n      roleSettings,\n    };\n\n    if (selectedRole !== null) {\n      const {\n        data: { updateRole: updatedRole },\n        // errors,\n      } = await updateRole({\n        variables: { id: selectedRole.id, ...payload },\n        errorPolicy: 'all',\n      });\n      setRole(updatedRole);\n    } else {\n      const {\n        data: { createRole: createdRole },\n        // errors,\n      } = await createRole({\n        variables: payload,\n        errorPolicy: 'all',\n      });\n      setRole(createdRole);\n    }\n  };\n\n  if (rolesLoading) {\n    return <div />;\n  }\n\n  return (\n    <S.Container>\n      <S.Header>\n        <S.Roles>\n          {roles.map(role => (\n            <S.Role\n              key={role.id}\n              active={selectedRole && selectedRole.title === role.title}\n              onClick={() => setRole(role)}\n            >\n              {role.title}\n            </S.Role>\n          ))}\n\n          <S.Role active={!selectedRole} onClick={() => setRole(null)}>\n            New role\n          </S.Role>\n        </S.Roles>\n        <S.Actions>\n          <S.PlusIconWrapper onClick={() => setRole(null)}>\n            <PlusIcon active={selectedRole === null} />\n          </S.PlusIconWrapper>\n          {selectedRole && (\n            <>\n              <MoreIcon active={showMorePopup} onClick={() => setShowMorePopup(!showMorePopup)} />\n              <Popup\n                opened={showMorePopup}\n                close={() => setShowMorePopup(false)}\n                items={[\n                  {\n                    label: 'Delete role',\n                    onClick: () => {\n                      deleteRole({\n                        variables: {\n                          id: selectedRole.id,\n                        },\n                      });\n                      setRole(roles[0]);\n                      setShowMorePopup(false);\n                    },\n                  },\n                ]}\n              />\n            </>\n          )}\n        </S.Actions>\n      </S.Header>\n      <S.Body>\n        <Formik\n          initialValues={(() => {\n            if (selectedRole !== null) {\n              return {\n                title: selectedRole.title,\n                color: selectedRole.color,\n                ...permissionsObject,\n              };\n            }\n            return {\n              title: '',\n              color: '#19BC9B',\n              ...permissionsObject,\n            };\n          })()}\n          enableReinitialize\n          onSubmit={onSubmit}\n        >\n          {({ isSubmitting }) => (\n            <Form style={{ paddingBottom: 76, paddingTop: 73 }}>\n              <Field\n                type=\"text\"\n                name=\"title\"\n                label=\"Role name\"\n                placeholder=\"Enter role name\"\n                component={Input}\n              />\n              <Field label=\"Role color\" name=\"color\" component={ColorInput} />\n              <S.SectionTitle>General permissions</S.SectionTitle>\n              {permissions.map(permission => (\n                <Field\n                  key={permission.key}\n                  type=\"text\"\n                  name={permission.key}\n                  label={permission.label}\n                  tip={permission.tip}\n                  component={ToggleInput}\n                />\n              ))}\n              <S.Footer>\n                <ButtonPrimary\n                  type=\"submit\"\n                  name=\"button\"\n                  disabled={isSubmitting}\n                  style={{ marginRight: 10 }}\n                >\n                  {selectedRole === null ? 'Create' : 'Save'}\n                </ButtonPrimary>\n                {selectedRole === null && (\n                  <ButtonSubtle\n                    type=\"submit\"\n                    name=\"button\"\n                    onClick={() => {\n                      setRole(roles[0]);\n                    }}\n                  >\n                    Cancel\n                  </ButtonSubtle>\n                )}\n              </S.Footer>\n            </Form>\n          )}\n        </Formik>\n      </S.Body>\n    </S.Container>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}