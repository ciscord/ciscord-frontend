{"ast":null,"code":"import moment from 'moment';\nimport ReactHtmlParser from 'react-html-parser';\nmoment.updateLocale('en', {\n  relativeTime: {\n    future: 'in %s',\n    past: '%s',\n    s: '',\n    ss: '%ss',\n    m: '1m',\n    mm: '%dm',\n    h: '1h',\n    hh: '%dh',\n    d: '1d',\n    dd: '%dd',\n    M: '1m',\n    MM: '%dM',\n    y: '1y',\n    yy: '%dY'\n  }\n});\nexport const chatTime = time => {\n  const date1 = new Date(time);\n  const date2 = new Date();\n  const diffTime = Math.abs(date2 - date1);\n  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n  if (diffDays > 0) {\n    return moment(time).format('L');\n  }\n  return moment(time).format('LT');\n};\nexport const transformMentions = message => message.replace(/@(\\[[^]*\\]\\([^ ]*?\\))/g, mention => `<a class=\"mention\">@${mention.match(/\\[(.*)\\]/)[1]}</a>`);\nconst transformLinebreaks = (message, multi) => {\n  if (multi) return message.replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');\n  return message.match(/^.*$/m)[0];\n};\nconst transformUrls = message => message.replace(/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi, url => `<a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"Message__link\"> ${url}</a>`);\nexport const transformMessage = (message, multi = true) => ReactHtmlParser(transformLinebreaks(transformMentions(transformUrls(message)), multi));\nexport const getUsername = user => user && user.name ? user.name : user.email;\nexport const awsUrl = process.env.AWS_S3_URL;\nexport const notificationHandler = title => {\n  // Let's check if the browser supports notifications\n  if (!('Notification' in window)) {\n    alert('This browser does not support desktop notification');\n  }\n\n  // Let's check whether notification permissions have already been granted\n  else if (Notification.permission === 'granted') {\n    // If it's okay let's create a notification\n    new Notification(title);\n  }\n\n  // Otherwise, we need to ask the user for permission\n  else if (Notification.permission !== 'denied') {\n    Notification.requestPermission().then(function (permission) {\n      // If the user accepts, let's create a notification\n      if (permission === 'granted') {\n        new Notification(title);\n      }\n    });\n  }\n};","map":{"version":3,"names":["moment","ReactHtmlParser","updateLocale","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","M","MM","y","yy","chatTime","time","date1","Date","date2","diffTime","Math","abs","diffDays","floor","format","transformMentions","message","replace","mention","match","transformLinebreaks","multi","transformUrls","url","transformMessage","getUsername","user","name","email","awsUrl","process","env","AWS_S3_URL","notificationHandler","title","window","alert","Notification","permission","requestPermission","then"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/utils/helper.js"],"sourcesContent":["import moment from 'moment';\nimport ReactHtmlParser from 'react-html-parser';\n\nmoment.updateLocale('en', {\n  relativeTime: {\n    future: 'in %s',\n    past: '%s',\n    s: '',\n    ss: '%ss',\n    m: '1m',\n    mm: '%dm',\n    h: '1h',\n    hh: '%dh',\n    d: '1d',\n    dd: '%dd',\n    M: '1m',\n    MM: '%dM',\n    y: '1y',\n    yy: '%dY',\n  },\n});\n\nexport const chatTime = time => {\n  const date1 = new Date(time);\n  const date2 = new Date();\n  const diffTime = Math.abs(date2 - date1);\n  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n\n  if (diffDays > 0) {\n    return moment(time).format('L');\n  }\n  return moment(time).format('LT');\n};\n\nexport const transformMentions = message =>\n  message.replace(\n    /@(\\[[^]*\\]\\([^ ]*?\\))/g,\n    mention => `<a class=\"mention\">@${mention.match(/\\[(.*)\\]/)[1]}</a>`\n  );\n\nconst transformLinebreaks = (message, multi) => {\n  if (multi) return message.replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');\n  return message.match(/^.*$/m)[0];\n};\n\nconst transformUrls = message =>\n  message.replace(\n    /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi,\n    url =>\n      `<a href=\"${url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"Message__link\"> ${url}</a>`\n  );\n\nexport const transformMessage = (message, multi = true) =>\n  ReactHtmlParser(transformLinebreaks(transformMentions(transformUrls(message)), multi));\n\nexport const getUsername = user => (user && user.name ? user.name : user.email);\n\nexport const awsUrl =\n  process.env.AWS_S3_URL;\n\nexport const notificationHandler = title => {\n  // Let's check if the browser supports notifications\n  if (!('Notification' in window)) {\n    alert('This browser does not support desktop notification');\n  }\n\n  // Let's check whether notification permissions have already been granted\n  else if (Notification.permission === 'granted') {\n    // If it's okay let's create a notification\n    new Notification(title);\n  }\n\n  // Otherwise, we need to ask the user for permission\n  else if (Notification.permission !== 'denied') {\n    Notification.requestPermission().then(function(permission) {\n      // If the user accepts, let's create a notification\n      if (permission === 'granted') {\n        new Notification(title);\n      }\n    });\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}