{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useContext } from 'react';\nimport Router from 'next/router';\nimport { UserContext } from 'context/UserContext';\nimport { COMPANY_NAME } from 'utils/config';\nimport { SettingsIcon, UsersIcon, RolesIcon, DarkModeIcon } from 'components/UI/Icons';\nimport Toggle from 'components/UI/Toggle/Toggle';\nimport useDarkMode from 'use-dark-mode';\nimport * as S from './ProfilePopup.styled';\nvar ModalMore = function ModalMore(_ref) {\n  var opened = _ref.opened,\n    close = _ref.close;\n  var _useContext = useContext(UserContext),\n    user = _useContext.user,\n    logout = _useContext.logout;\n  var _useDarkMode = useDarkMode(false),\n    isDarkMode = _useDarkMode.value,\n    toggle = _useDarkMode.toggle;\n  useEffect(function () {\n    var listener = document.body.addEventListener('click', function (event) {\n      var modalContainer = event.target.closest('#modal-more');\n      var profileIconContainer = event.target.closest('#profile-icon');\n      if (!modalContainer && !profileIconContainer) {\n        close();\n      }\n    });\n    return function () {\n      return document.body.removeEventListener('click', listener);\n    };\n  }, []);\n  var onLogout = function onLogout() {\n    logout();\n    close();\n  };\n  return __jsx(S.Container, {\n    opened: opened,\n    id: \"modal-more\"\n  }, user && __jsx(S.Header, null, __jsx(S.Avatar, {\n    name: user.username\n  }), __jsx(S.Info, null, __jsx(S.Fullname, null, user.fullname), __jsx(S.Username, null, \"@\".concat(user.username)))), __jsx(S.Content, {\n    style: !user ? {\n      border: 'none'\n    } : {}\n  }, user && __jsx(S.MenuItem, {\n    onClick: function onClick() {\n      Router.push('/[company]/settings/members', \"/\".concat(COMPANY_NAME(), \"/settings/members\"), {\n        shallow: true\n      });\n      close();\n    }\n  }, __jsx(S.UsersIcon, null, __jsx(UsersIcon, null)), __jsx(\"span\", null, \"Members\")), user && __jsx(S.MenuItem, {\n    onClick: function onClick() {\n      Router.push('/[company]/settings/roles', \"/\".concat(COMPANY_NAME(), \"/settings/roles\"), {\n        shallow: true\n      });\n      close();\n    }\n  }, __jsx(S.RolesIcon, null, __jsx(RolesIcon, null)), __jsx(\"span\", null, \"Roles\")), user && __jsx(S.MenuItem, {\n    onClick: function onClick() {\n      Router.push('/[company]/settings/profile', \"/\".concat(COMPANY_NAME(), \"/settings/profile\"), {\n        shallow: true\n      });\n      close();\n    }\n  }, __jsx(SettingsIcon, null), __jsx(\"span\", null, \"Settings\")), __jsx(S.MenuItem, {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between',\n      alignItems: 'center'\n    }\n  }, __jsx(\"div\", null, __jsx(DarkModeIcon, null), __jsx(\"span\", null, \"Dark mode\")), __jsx(Toggle, {\n    onChange: toggle,\n    value: isDarkMode\n  }))), user && __jsx(S.Footer, {\n    onClick: function onClick() {\n      return onLogout();\n    }\n  }, __jsx(\"span\", null, \"Log out\")));\n};\nexport default ModalMore;","map":{"version":3,"names":["useEffect","useContext","Router","UserContext","COMPANY_NAME","SettingsIcon","UsersIcon","RolesIcon","DarkModeIcon","Toggle","useDarkMode","S","ModalMore","opened","close","user","logout","isDarkMode","value","toggle","listener","document","body","addEventListener","event","modalContainer","target","closest","profileIconContainer","removeEventListener","onLogout","username","fullname","border","push","shallow","display","justifyContent","alignItems"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/components/Navbar/More/ProfilePopup.js"],"sourcesContent":["import { useEffect, useContext } from 'react';\nimport Router from 'next/router';\nimport { UserContext } from 'context/UserContext';\nimport { COMPANY_NAME } from 'utils/config';\nimport { SettingsIcon, UsersIcon, RolesIcon, DarkModeIcon } from 'components/UI/Icons';\nimport Toggle from 'components/UI/Toggle/Toggle';\nimport useDarkMode from 'use-dark-mode';\n\nimport * as S from './ProfilePopup.styled';\n\nconst ModalMore = ({ opened, close }) => {\n  const { user, logout } = useContext(UserContext);\n  const { value: isDarkMode, toggle } = useDarkMode(false);\n\n  useEffect(() => {\n    const listener = document.body.addEventListener('click', event => {\n      const modalContainer = event.target.closest('#modal-more');\n      const profileIconContainer = event.target.closest('#profile-icon');\n      if (!modalContainer && !profileIconContainer) {\n        close();\n      }\n    });\n    return () => document.body.removeEventListener('click', listener);\n  }, []);\n\n  const onLogout = () => {\n    logout();\n    close();\n  };\n\n  return (\n    <S.Container opened={opened} id=\"modal-more\">\n      {user && (\n        <S.Header>\n          <S.Avatar name={user.username} />\n          <S.Info>\n            <S.Fullname>{user.fullname}</S.Fullname>\n            <S.Username>{`@${user.username}`}</S.Username>\n          </S.Info>\n        </S.Header>\n      )}\n      <S.Content style={!user ? { border: 'none' } : {}}>\n        {user && (\n          <S.MenuItem\n            onClick={() => {\n              Router.push('/[company]/settings/members', `/${COMPANY_NAME()}/settings/members`, {\n                shallow: true,\n              });\n              close();\n            }}\n          >\n            <S.UsersIcon>\n              <UsersIcon />\n            </S.UsersIcon>\n            <span>Members</span>\n          </S.MenuItem>\n        )}\n        {user && (\n          <S.MenuItem\n            onClick={() => {\n              Router.push('/[company]/settings/roles', `/${COMPANY_NAME()}/settings/roles`, {\n                shallow: true,\n              });\n              close();\n            }}\n          >\n            <S.RolesIcon>\n              <RolesIcon />\n            </S.RolesIcon>\n            <span>Roles</span>\n          </S.MenuItem>\n        )}\n        {user && (\n          <S.MenuItem\n            onClick={() => {\n              Router.push('/[company]/settings/profile', `/${COMPANY_NAME()}/settings/profile`, {\n                shallow: true,\n              });\n              close();\n            }}\n          >\n            <SettingsIcon />\n            <span>Settings</span>\n          </S.MenuItem>\n        )}\n        <S.MenuItem\n          style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n          }}\n        >\n          <div>\n            <DarkModeIcon />\n            <span>Dark mode</span>\n          </div>\n          <Toggle onChange={toggle} value={isDarkMode} />\n        </S.MenuItem>\n      </S.Content>\n      {user && (\n        <S.Footer onClick={() => onLogout()}>\n          <span>Log out</span>\n        </S.Footer>\n      )}\n    </S.Container>\n  );\n};\n\nexport default ModalMore;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}