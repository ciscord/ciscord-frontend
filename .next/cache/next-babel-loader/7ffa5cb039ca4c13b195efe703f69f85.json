{"ast":null,"code":"var _jsxFileName = \"/Volumes/MacData/work/ciscord-frontend.git/components/Communities/CommunitiesList/Community/Community.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from 'next/router';\nimport { useContext } from 'react';\nimport { UserContext } from 'context/UserContext';\nimport { useMutation } from '@apollo/client';\nimport { COMPANY_NAME } from 'utils/config';\nimport { FOLLOW_COMMUNITY, UNFOLLOW_COMMUNITY } from 'apis/Community';\nimport Checkbox from 'components/UI/Checkbox/CommunityCheckbox';\nimport * as S from './Community.styled';\nexport default (({\n  community\n}) => {\n  const router = useRouter();\n  const {\n    user,\n    getMe\n  } = useContext(UserContext);\n  const [followCommunity] = useMutation(FOLLOW_COMMUNITY);\n  const [unfollowCommunity] = useMutation(UNFOLLOW_COMMUNITY);\n  const isFollowing = user ? community.members.map(c => c.id).indexOf(user.id) > -1 : true;\n  const onFollow = async url => {\n    if (isFollowing) {\n      await unfollowCommunity({\n        variables: {\n          url\n        }\n      });\n    } else {\n      await followCommunity({\n        variables: {\n          url\n        }\n      });\n    }\n    getMe();\n  };\n  const onCommunityClick = e => {\n    const checkboxClick = e.target.closest('.checkbox');\n    if (!checkboxClick) {\n      router.push(`/[company]/[community]/[channel]`, `/${COMPANY_NAME()}/${community.url}/general`, {\n        shallow: true\n      });\n    }\n  };\n  return __jsx(S.Community, {\n    onClick: onCommunityClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, __jsx(S.Avatar, {\n    src: community.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }), __jsx(S.Info, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, __jsx(S.Name, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, community.name), __jsx(S.Description, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, community.description)), user && __jsx(Checkbox, {\n    id: community.id,\n    checked: isFollowing,\n    onClick: () => user ? onFollow(community.url) : {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }));\n});","map":{"version":3,"names":["useRouter","useContext","UserContext","useMutation","COMPANY_NAME","FOLLOW_COMMUNITY","UNFOLLOW_COMMUNITY","Checkbox","S","community","router","user","getMe","followCommunity","unfollowCommunity","isFollowing","members","map","c","id","indexOf","onFollow","url","variables","onCommunityClick","e","checkboxClick","target","closest","push","shallow","image","name","description"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/components/Communities/CommunitiesList/Community/Community.js"],"sourcesContent":["import { useRouter } from 'next/router';\nimport { useContext } from 'react';\nimport { UserContext } from 'context/UserContext';\nimport { useMutation } from '@apollo/client';\n\nimport { COMPANY_NAME } from 'utils/config';\nimport { FOLLOW_COMMUNITY, UNFOLLOW_COMMUNITY } from 'apis/Community';\n\nimport Checkbox from 'components/UI/Checkbox/CommunityCheckbox';\nimport * as S from './Community.styled';\n\nexport default ({ community }) => {\n  const router = useRouter();\n  const { user, getMe } = useContext(UserContext);\n  const [followCommunity] = useMutation(FOLLOW_COMMUNITY);\n  const [unfollowCommunity] = useMutation(UNFOLLOW_COMMUNITY);\n\n  const isFollowing = user ? community.members.map(c => c.id).indexOf(user.id) > -1 : true;\n\n  const onFollow = async url => {\n    if (isFollowing) {\n      await unfollowCommunity({ variables: { url } });\n    } else {\n      await followCommunity({ variables: { url } });\n    }\n    getMe();\n  };\n\n  const onCommunityClick = e => {\n    const checkboxClick = e.target.closest('.checkbox');\n\n    if (!checkboxClick) {\n      router.push(\n        `/[company]/[community]/[channel]`,\n        `/${COMPANY_NAME()}/${community.url}/general`,\n        { shallow: true }\n      );\n    }\n  };\n\n  return (\n    <S.Community onClick={onCommunityClick}>\n      <S.Avatar src={community.image} />\n      <S.Info>\n        <S.Name>{community.name}</S.Name>\n        <S.Description>{community.description}</S.Description>\n      </S.Info>\n      {user && (\n        <Checkbox\n          id={community.id}\n          checked={isFollowing}\n          onClick={() => (user ? onFollow(community.url) : {})}\n        />\n      )}\n    </S.Community>\n  );\n};\n"],"mappings":";;;AAAA,SAASA,SAAS,QAAQ,aAAa;AACvC,SAASC,UAAU,QAAQ,OAAO;AAClC,SAASC,WAAW,QAAQ,qBAAqB;AACjD,SAASC,WAAW,QAAQ,gBAAgB;AAE5C,SAASC,YAAY,QAAQ,cAAc;AAC3C,SAASC,gBAAgB,EAAEC,kBAAkB,QAAQ,gBAAgB;AAErE,OAAOC,QAAQ,MAAM,0CAA0C;AAC/D,OAAO,KAAKC,CAAC,MAAM,oBAAoB;AAEvC,gBAAe,CAAC;EAAEC;AAAU,CAAC,KAAK;EAChC,MAAMC,MAAM,GAAGV,SAAS,EAAE;EAC1B,MAAM;IAAEW,IAAI;IAAEC;EAAM,CAAC,GAAGX,UAAU,CAACC,WAAW,CAAC;EAC/C,MAAM,CAACW,eAAe,CAAC,GAAGV,WAAW,CAACE,gBAAgB,CAAC;EACvD,MAAM,CAACS,iBAAiB,CAAC,GAAGX,WAAW,CAACG,kBAAkB,CAAC;EAE3D,MAAMS,WAAW,GAAGJ,IAAI,GAAGF,SAAS,CAACO,OAAO,CAACC,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,CAAC,CAACC,OAAO,CAACT,IAAI,CAACQ,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI;EAExF,MAAME,QAAQ,GAAG,MAAMC,GAAG,IAAI;IAC5B,IAAIP,WAAW,EAAE;MACf,MAAMD,iBAAiB,CAAC;QAAES,SAAS,EAAE;UAAED;QAAI;MAAE,CAAC,CAAC;IACjD,CAAC,MAAM;MACL,MAAMT,eAAe,CAAC;QAAEU,SAAS,EAAE;UAAED;QAAI;MAAE,CAAC,CAAC;IAC/C;IACAV,KAAK,EAAE;EACT,CAAC;EAED,MAAMY,gBAAgB,GAAGC,CAAC,IAAI;IAC5B,MAAMC,aAAa,GAAGD,CAAC,CAACE,MAAM,CAACC,OAAO,CAAC,WAAW,CAAC;IAEnD,IAAI,CAACF,aAAa,EAAE;MAClBhB,MAAM,CAACmB,IAAI,CACR,kCAAiC,EACjC,IAAGzB,YAAY,EAAG,IAAGK,SAAS,CAACa,GAAI,UAAS,EAC7C;QAAEQ,OAAO,EAAE;MAAK,CAAC,CAClB;IACH;EACF,CAAC;EAED,OACE,MAAC,CAAC,CAAC,SAAS;IAAC,OAAO,EAAEN,gBAAiB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACrC,MAAC,CAAC,CAAC,MAAM;IAAC,GAAG,EAAEf,SAAS,CAACsB,KAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,EAClC,MAAC,CAAC,CAAC,IAAI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACL,MAAC,CAAC,CAAC,IAAI;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAEtB,SAAS,CAACuB,IAAI,CAAU,EACjC,MAAC,CAAC,CAAC,WAAW;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAEvB,SAAS,CAACwB,WAAW,CAAiB,CAC/C,EACRtB,IAAI,IACH,MAAC,QAAQ;IACP,EAAE,EAAEF,SAAS,CAACU,EAAG;IACjB,OAAO,EAAEJ,WAAY;IACrB,OAAO,EAAE,MAAOJ,IAAI,GAAGU,QAAQ,CAACZ,SAAS,CAACa,GAAG,CAAC,GAAG,CAAC,CAAG;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAExD,CACW;AAElB,CAAC"},"metadata":{},"sourceType":"module"}