{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useRef } from 'react';\nimport * as S from './styled';\nconst fileTypes = [{\n  name: 'png',\n  type: ['png']\n}, {\n  name: 'jpg',\n  type: ['jpg', 'jpeg']\n}, {\n  name: 'gif',\n  type: ['gif']\n}];\nconst FileInput = ({\n  field,\n  onChange,\n  form: {\n    touched,\n    errors\n  },\n  tip,\n  label,\n  removeButtonText = 'Remove'\n}) => {\n  const {\n    0: imagePreview,\n    1: setImagePreview\n  } = useState('');\n  const {\n    0: activeType,\n    1: setActiveType\n  } = useState(-1);\n  const inputRef = useRef();\n  const handleChange = e => {\n    const file = e.target.files[0];\n    if (file && file.type.includes('image/')) {\n      const previewLink = URL.createObjectURL(file);\n      const active = fileTypes.findIndex(({\n        type\n      }) => type.includes(file.type.slice(6)));\n      setActiveType(active);\n      setImagePreview(previewLink);\n    }\n    onChange(e);\n    return e;\n  };\n  const removePreview = () => {\n    setImagePreview('');\n    setActiveType(-1);\n    if (inputRef) {\n      inputRef.current.value = '';\n    }\n  };\n  return __jsx(S.Container, null, __jsx(S.File, null, __jsx(S.InputLabel, {\n    htmlFor: \"image-upload\"\n  }, imagePreview && __jsx(S.Image, {\n    src: imagePreview\n  }), __jsx(S.Input, {\n    id: \"image-upload\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleChange,\n    ref: inputRef\n  }))), __jsx(S.FileInfo, null, __jsx(S.Label, null, label), __jsx(S.Tip, null, tip), __jsx(S.FileTypes, null, fileTypes.map(({\n    name\n  }, i) => __jsx(S.FileType, {\n    className: `${i === activeType ? 'active' : ''}`,\n    key: name\n  }, name))), imagePreview && __jsx(S.RemoveButton, {\n    onClick: removePreview\n  }, removeButtonText), touched[field.name] && errors[field.name] && __jsx(S.Error, null, errors[field.name])));\n};\nexport default FileInput;","map":{"version":3,"names":["React","useState","useRef","S","fileTypes","name","type","FileInput","field","onChange","form","touched","errors","tip","label","removeButtonText","imagePreview","setImagePreview","activeType","setActiveType","inputRef","handleChange","e","file","target","files","includes","previewLink","URL","createObjectURL","active","findIndex","slice","removePreview","current","value","map","i"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/components/UI/Input/FileInput/FileInput.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport * as S from './styled';\n\nconst fileTypes = [\n  { name: 'png', type: ['png'] },\n  { name: 'jpg', type: ['jpg', 'jpeg'] },\n  { name: 'gif', type: ['gif'] },\n];\n\nconst FileInput = ({\n  field,\n  onChange,\n  form: { touched, errors },\n  tip,\n  label,\n  removeButtonText = 'Remove',\n}) => {\n  const [imagePreview, setImagePreview] = useState('');\n  const [activeType, setActiveType] = useState(-1);\n  const inputRef = useRef();\n\n  const handleChange = e => {\n    const file = e.target.files[0];\n\n    if (file && file.type.includes('image/')) {\n      const previewLink = URL.createObjectURL(file);\n      const active = fileTypes.findIndex(({ type }) => type.includes(file.type.slice(6)));\n\n      setActiveType(active);\n      setImagePreview(previewLink);\n    }\n\n    onChange(e);\n    return e;\n  };\n\n  const removePreview = () => {\n    setImagePreview('');\n    setActiveType(-1);\n\n    if (inputRef) {\n      inputRef.current.value = '';\n    }\n  };\n\n  return (\n    <S.Container>\n      <S.File>\n        <S.InputLabel htmlFor=\"image-upload\">\n          {imagePreview && <S.Image src={imagePreview} />}\n          <S.Input\n            id=\"image-upload\"\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={handleChange}\n            ref={inputRef}\n          />\n        </S.InputLabel>\n      </S.File>\n\n      <S.FileInfo>\n        <S.Label>{label}</S.Label>\n        <S.Tip>{tip}</S.Tip>\n\n        <S.FileTypes>\n          {fileTypes.map(({ name }, i) => (\n            <S.FileType className={`${i === activeType ? 'active' : ''}`} key={name}>\n              {name}\n            </S.FileType>\n          ))}\n        </S.FileTypes>\n\n        {imagePreview && (\n          <S.RemoveButton onClick={removePreview}>{removeButtonText}</S.RemoveButton>\n        )}\n\n        {touched[field.name] && errors[field.name] && <S.Error>{errors[field.name]}</S.Error>}\n      </S.FileInfo>\n    </S.Container>\n  );\n};\n\nexport default FileInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}