{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useContext, useState, useEffect } from 'react';\nimport { useMutation } from '@apollo/client';\nimport InlineEdit from 'components/UI/InlineEdit/Parent';\nimport { EDIT_CHANNEL } from 'apis/Channel';\nimport { UserContext } from 'context/UserContext';\nimport { canManageChannel } from 'utils/permission';\nimport * as S from './Topic.styled';\nconst Topic = ({\n  onChangeTopic,\n  channel\n}) => {\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    0: topic,\n    1: setTopic\n  } = useState(channel.description || '');\n  const [editChannel] = useMutation(EDIT_CHANNEL);\n  const canSetTopic = user && canManageChannel(user);\n  useEffect(() => {\n    setTopic(channel.description);\n  }, [channel]);\n  const changeDescription = async () => {\n    try {\n      await editChannel({\n        variables: {\n          channelId: channel.id,\n          communityUrl: channel.communityUrl,\n          url: channel.url,\n          name: channel.name,\n          description: topic\n        },\n        errorPolicy: 'all'\n      });\n      onChangeTopic();\n    } catch (error) {\n      // alert(error);\n    }\n  };\n  return __jsx(S.ChatTopic, null, __jsx(InlineEdit, {\n    value: topic,\n    onChange: e => setTopic(e.target.value),\n    placeholder: \"Set a topic\",\n    onSave: changeDescription,\n    canEdit: canSetTopic\n  }));\n};\nexport default Topic;","map":{"version":3,"names":["useContext","useState","useEffect","useMutation","InlineEdit","EDIT_CHANNEL","UserContext","canManageChannel","S","Topic","onChangeTopic","channel","user","topic","setTopic","description","editChannel","canSetTopic","changeDescription","variables","channelId","id","communityUrl","url","name","errorPolicy","error","e","target","value"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/components/Chat/Header/Topic/Topic.js"],"sourcesContent":["import { useContext, useState, useEffect } from 'react';\nimport { useMutation } from '@apollo/client';\nimport InlineEdit from 'components/UI/InlineEdit/Parent';\n\nimport { EDIT_CHANNEL } from 'apis/Channel';\n\nimport { UserContext } from 'context/UserContext';\nimport { canManageChannel } from 'utils/permission';\n\nimport * as S from './Topic.styled';\n\nconst Topic = ({ onChangeTopic, channel }) => {\n  const { user } = useContext(UserContext);\n  const [topic, setTopic] = useState(channel.description || '');\n  const [editChannel] = useMutation(EDIT_CHANNEL);\n  const canSetTopic = user && canManageChannel(user);\n\n  useEffect(() => {\n    setTopic(channel.description);\n  }, [channel]);\n\n  const changeDescription = async () => {\n    try {\n      await editChannel({\n        variables: {\n          channelId: channel.id,\n          communityUrl: channel.communityUrl,\n          url: channel.url,\n          name: channel.name,\n          description: topic,\n        },\n        errorPolicy: 'all',\n      });\n      onChangeTopic();\n    } catch (error) {\n      // alert(error);\n    }\n  };\n\n  return (\n    <S.ChatTopic>\n      <InlineEdit\n        value={topic}\n        onChange={e => setTopic(e.target.value)}\n        placeholder=\"Set a topic\"\n        onSave={changeDescription}\n        canEdit={canSetTopic}\n      />\n    </S.ChatTopic>\n  );\n};\n\nexport default Topic;\n"],"mappings":";;AAAA,SAASA,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACvD,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,OAAOC,UAAU,MAAM,iCAAiC;AAExD,SAASC,YAAY,QAAQ,cAAc;AAE3C,SAASC,WAAW,QAAQ,qBAAqB;AACjD,SAASC,gBAAgB,QAAQ,kBAAkB;AAEnD,OAAO,KAAKC,CAAC,MAAM,gBAAgB;AAEnC,MAAMC,KAAK,GAAG,CAAC;EAAEC,aAAa;EAAEC;AAAQ,CAAC,KAAK;EAC5C,MAAM;IAAEC;EAAK,CAAC,GAAGZ,UAAU,CAACM,WAAW,CAAC;EACxC,MAAM;IAAA,GAACO,KAAK;IAAA,GAAEC;EAAQ,IAAIb,QAAQ,CAACU,OAAO,CAACI,WAAW,IAAI,EAAE,CAAC;EAC7D,MAAM,CAACC,WAAW,CAAC,GAAGb,WAAW,CAACE,YAAY,CAAC;EAC/C,MAAMY,WAAW,GAAGL,IAAI,IAAIL,gBAAgB,CAACK,IAAI,CAAC;EAElDV,SAAS,CAAC,MAAM;IACdY,QAAQ,CAACH,OAAO,CAACI,WAAW,CAAC;EAC/B,CAAC,EAAE,CAACJ,OAAO,CAAC,CAAC;EAEb,MAAMO,iBAAiB,GAAG,YAAY;IACpC,IAAI;MACF,MAAMF,WAAW,CAAC;QAChBG,SAAS,EAAE;UACTC,SAAS,EAAET,OAAO,CAACU,EAAE;UACrBC,YAAY,EAAEX,OAAO,CAACW,YAAY;UAClCC,GAAG,EAAEZ,OAAO,CAACY,GAAG;UAChBC,IAAI,EAAEb,OAAO,CAACa,IAAI;UAClBT,WAAW,EAAEF;QACf,CAAC;QACDY,WAAW,EAAE;MACf,CAAC,CAAC;MACFf,aAAa,EAAE;IACjB,CAAC,CAAC,OAAOgB,KAAK,EAAE;MACd;IAAA;EAEJ,CAAC;EAED,OACE,MAAC,CAAC,CAAC,SAAS,QACV,MAAC,UAAU;IACT,KAAK,EAAEb,KAAM;IACb,QAAQ,EAAEc,CAAC,IAAIb,QAAQ,CAACa,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;IACxC,WAAW,EAAC,aAAa;IACzB,MAAM,EAAEX,iBAAkB;IAC1B,OAAO,EAAED;EAAY,EACrB,CACU;AAElB,CAAC;AAED,eAAeR,KAAK"},"metadata":{},"sourceType":"module"}