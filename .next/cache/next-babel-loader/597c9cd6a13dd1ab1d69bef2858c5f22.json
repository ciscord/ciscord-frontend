{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useRef } from 'react';\nimport * as S from './styled';\nvar fileTypes = [{\n  name: 'png',\n  type: ['png']\n}, {\n  name: 'jpg',\n  type: ['jpg', 'jpeg']\n}, {\n  name: 'gif',\n  type: ['gif']\n}];\nvar FileInput = function FileInput(_ref) {\n  var field = _ref.field,\n    onChange = _ref.onChange,\n    _ref$form = _ref.form,\n    touched = _ref$form.touched,\n    errors = _ref$form.errors,\n    tip = _ref.tip,\n    label = _ref.label,\n    _ref$removeButtonText = _ref.removeButtonText,\n    removeButtonText = _ref$removeButtonText === void 0 ? 'Remove' : _ref$removeButtonText;\n  var _useState = useState(''),\n    imagePreview = _useState[0],\n    setImagePreview = _useState[1];\n  var _useState2 = useState(-1),\n    activeType = _useState2[0],\n    setActiveType = _useState2[1];\n  var inputRef = useRef();\n  var handleChange = function handleChange(e) {\n    var file = e.target.files[0];\n    if (file && file.type.includes('image/')) {\n      var previewLink = URL.createObjectURL(file);\n      var active = fileTypes.findIndex(function (_ref2) {\n        var type = _ref2.type;\n        return type.includes(file.type.slice(6));\n      });\n      setActiveType(active);\n      setImagePreview(previewLink);\n    }\n    onChange(e);\n    return e;\n  };\n  var removePreview = function removePreview() {\n    setImagePreview('');\n    setActiveType(-1);\n    if (inputRef) {\n      inputRef.current.value = '';\n    }\n  };\n  return __jsx(S.Container, null, __jsx(S.File, null, __jsx(S.InputLabel, {\n    htmlFor: \"image-upload\"\n  }, imagePreview && __jsx(S.Image, {\n    src: imagePreview\n  }), __jsx(S.Input, {\n    id: \"image-upload\",\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleChange,\n    ref: inputRef\n  }))), __jsx(S.FileInfo, null, __jsx(S.Label, null, label), __jsx(S.Tip, null, tip), __jsx(S.FileTypes, null, fileTypes.map(function (_ref3, i) {\n    var name = _ref3.name;\n    return __jsx(S.FileType, {\n      className: \"\".concat(i === activeType ? 'active' : ''),\n      key: name\n    }, name);\n  })), imagePreview && __jsx(S.RemoveButton, {\n    onClick: removePreview\n  }, removeButtonText), touched[field.name] && errors[field.name] && __jsx(S.Error, null, errors[field.name])));\n};\nexport default FileInput;","map":{"version":3,"names":["React","useState","useRef","S","fileTypes","name","type","FileInput","field","onChange","form","touched","errors","tip","label","removeButtonText","imagePreview","setImagePreview","activeType","setActiveType","inputRef","handleChange","e","file","target","files","includes","previewLink","URL","createObjectURL","active","findIndex","slice","removePreview","current","value","map","i"],"sources":["/Volumes/MacData/work/ciscord-frontend.git/components/UI/Input/FileInput/FileInput.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport * as S from './styled';\n\nconst fileTypes = [\n  { name: 'png', type: ['png'] },\n  { name: 'jpg', type: ['jpg', 'jpeg'] },\n  { name: 'gif', type: ['gif'] },\n];\n\nconst FileInput = ({\n  field,\n  onChange,\n  form: { touched, errors },\n  tip,\n  label,\n  removeButtonText = 'Remove',\n}) => {\n  const [imagePreview, setImagePreview] = useState('');\n  const [activeType, setActiveType] = useState(-1);\n  const inputRef = useRef();\n\n  const handleChange = e => {\n    const file = e.target.files[0];\n\n    if (file && file.type.includes('image/')) {\n      const previewLink = URL.createObjectURL(file);\n      const active = fileTypes.findIndex(({ type }) => type.includes(file.type.slice(6)));\n\n      setActiveType(active);\n      setImagePreview(previewLink);\n    }\n\n    onChange(e);\n    return e;\n  };\n\n  const removePreview = () => {\n    setImagePreview('');\n    setActiveType(-1);\n\n    if (inputRef) {\n      inputRef.current.value = '';\n    }\n  };\n\n  return (\n    <S.Container>\n      <S.File>\n        <S.InputLabel htmlFor=\"image-upload\">\n          {imagePreview && <S.Image src={imagePreview} />}\n          <S.Input\n            id=\"image-upload\"\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={handleChange}\n            ref={inputRef}\n          />\n        </S.InputLabel>\n      </S.File>\n\n      <S.FileInfo>\n        <S.Label>{label}</S.Label>\n        <S.Tip>{tip}</S.Tip>\n\n        <S.FileTypes>\n          {fileTypes.map(({ name }, i) => (\n            <S.FileType className={`${i === activeType ? 'active' : ''}`} key={name}>\n              {name}\n            </S.FileType>\n          ))}\n        </S.FileTypes>\n\n        {imagePreview && (\n          <S.RemoveButton onClick={removePreview}>{removeButtonText}</S.RemoveButton>\n        )}\n\n        {touched[field.name] && errors[field.name] && <S.Error>{errors[field.name]}</S.Error>}\n      </S.FileInfo>\n    </S.Container>\n  );\n};\n\nexport default FileInput;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}