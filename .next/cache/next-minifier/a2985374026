{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{\"2DVT\":function(n,t,o){\"use strict\";o.r(t);var e=o(\"hfKm\"),i=o.n(e),r=o(\"2Eek\"),a=o.n(r),u=o(\"XoMD\"),l=o.n(u),s=o(\"Jo+v\"),c=o.n(s),d=o(\"4mXO\"),v=o.n(d),p=o(\"pLtp\"),b=o.n(p),f=o(\"dfwq\"),m=o(\"vYYK\"),h=o(\"rt45\"),y=o(\"q1tI\"),g=o.n(y),O=o(\"nOHt\"),j=o(\"j2l1\"),S=o(\"BuKb\"),w=o(\"v2L8\"),D=o(\"6OIj\");var x,C=o(\"lTCR\"),k=o.n(C),E=o(\"00EI\"),T=o(\"EcdV\"),_=o(\"vOnD\"),P=Object(_.keyframes)([\"0%{transform:translateY(0);}33%{transform:translateY(-5px);}66%{transform:translateY(5px);}100%{transform:translateY(0);}\"]),R=_.default.p.withConfig({displayName:\"TypingStatusstyled__Container\",componentId:\"afr36e-0\"})([\"font-weight:400;font-size:13px;color:#484848;width:300px;position:absolute;top:-20px;\"]),I=_.default.span.withConfig({displayName:\"TypingStatusstyled__Circle\",componentId:\"afr36e-1\"})([\"display:inline-block;width:3px;height:3px;min-width:3px;min-height:3px;background:#666566;border-radius:50%;margin-bottom:4px;animation-name:\",\";animation-duration:1s;animation-iteration-count:infinite;margin-left:5px;:nth-of-type(2){animation-delay:0.1s;}:nth-of-type(3){animation-delay:0.2s;}:nth-of-type(4){animation-delay:0.3s;}\"],P),Y=g.a.createElement;function $(n,t){var o=b()(n);if(v.a){var e=v()(n);t&&(e=e.filter((function(t){return c()(n,t).enumerable}))),o.push.apply(o,e)}return o}var q=k()(x||(x=Object(h.a)([\"\\n  subscription userTypingStatus($channelUrl: String, $tenant: String, $username: String) {\\n    userTypingStatus(channelUrl: $channelUrl, tenant: $tenant, username: $username) {\\n      username\\n      isTyping\\n    }\\n  }\\n\"])));t.default=function(){var n=Object(y.useState)([]),t=n[0],o=n[1],e=Object(y.useState)({}),r=e[0],u=e[1],s=Object(y.useContext)(T.a).user,d=Object(O.useRouter)().query,v=d.channel,p=d.community,b=\"\".concat(p,\"/\").concat(v),h=function(n){var t={};t[n]=setTimeout((function(){o((function(t){return t.filter((function(t){return t!==n}))}))}),3e3),u(function(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?$(Object(o),!0).forEach((function(t){Object(m.a)(n,t,o[t])})):l.a?a()(n,l()(o)):$(Object(o)).forEach((function(t){i()(n,t,c()(o,t))}))}return n}({typingTimeouts:r},t))};!function(n,t){var o=Object(y.useRef)(!1),e=Object(D.a)(null===t||void 0===t?void 0:t.client);Object(w.b)(n,w.a.Subscription);var i=Object(y.useState)({loading:!(null===t||void 0===t?void 0:t.skip),error:void 0,data:void 0,variables:null===t||void 0===t?void 0:t.variables}),r=i[0],a=i[1];o.current||(o.current=!0,(null===t||void 0===t?void 0:t.onSubscriptionData)&&__DEV__&&j.c.warn(t.onData?\"'useSubscription' supports only the 'onSubscriptionData' or 'onData' option, but not both. Only the 'onData' option will be used.\":\"'onSubscriptionData' is deprecated and will be removed in a future major version. Please use the 'onData' option instead.\"),(null===t||void 0===t?void 0:t.onSubscriptionComplete)&&__DEV__&&j.c.warn(t.onComplete?\"'useSubscription' supports only the 'onSubscriptionComplete' or 'onComplete' option, but not both. Only the 'onComplete' option will be used.\":\"'onSubscriptionComplete' is deprecated and will be removed in a future major version. Please use the 'onComplete' option instead.\"));var u=Object(y.useState)((function(){return(null===t||void 0===t?void 0:t.skip)?null:e.subscribe({query:n,variables:null===t||void 0===t?void 0:t.variables,fetchPolicy:null===t||void 0===t?void 0:t.fetchPolicy,context:null===t||void 0===t?void 0:t.context})})),l=u[0],s=u[1],c=Object(y.useRef)(!1);Object(y.useEffect)((function(){return function(){c.current=!0}}),[]);var d=Object(y.useRef)({client:e,subscription:n,options:t});Object(y.useEffect)((function(){var o,i,r,u,l=null===t||void 0===t?void 0:t.shouldResubscribe;\"function\"===typeof l&&(l=!!l(t)),(null===t||void 0===t?void 0:t.skip)?(!(null===t||void 0===t?void 0:t.skip)!==!(null===(o=d.current.options)||void 0===o?void 0:o.skip)||c.current)&&(a({loading:!1,data:void 0,error:void 0,variables:null===t||void 0===t?void 0:t.variables}),s(null),c.current=!1):(!1===l||e===d.current.client&&n===d.current.subscription&&(null===t||void 0===t?void 0:t.fetchPolicy)===(null===(i=d.current.options)||void 0===i?void 0:i.fetchPolicy)&&!(null===t||void 0===t?void 0:t.skip)===!(null===(r=d.current.options)||void 0===r?void 0:r.skip)&&Object(S.a)(null===t||void 0===t?void 0:t.variables,null===(u=d.current.options)||void 0===u?void 0:u.variables))&&!c.current||(a({loading:!0,data:void 0,error:void 0,variables:null===t||void 0===t?void 0:t.variables}),s(e.subscribe({query:n,variables:null===t||void 0===t?void 0:t.variables,fetchPolicy:null===t||void 0===t?void 0:t.fetchPolicy,context:null===t||void 0===t?void 0:t.context})),c.current=!1),Object.assign(d.current,{client:e,subscription:n,options:t})}),[e,n,t,c.current]),Object(y.useEffect)((function(){if(l){var n=l.subscribe({next:function(n){var o,i,r={loading:!1,data:n.data,error:void 0,variables:null===t||void 0===t?void 0:t.variables};a(r),(null===(o=d.current.options)||void 0===o?void 0:o.onData)?d.current.options.onData({client:e,data:r}):(null===(i=d.current.options)||void 0===i?void 0:i.onSubscriptionData)&&d.current.options.onSubscriptionData({client:e,subscriptionData:r})},error:function(n){var o,e;a({loading:!1,data:void 0,error:n,variables:null===t||void 0===t?void 0:t.variables}),null===(e=null===(o=d.current.options)||void 0===o?void 0:o.onError)||void 0===e||e.call(o,n)},complete:function(){var n,t;(null===(n=d.current.options)||void 0===n?void 0:n.onComplete)?d.current.options.onComplete():(null===(t=d.current.options)||void 0===t?void 0:t.onSubscriptionComplete)&&d.current.options.onSubscriptionComplete()}});return function(){n.unsubscribe()}}}),[l])}(q,{variables:{channelUrl:b,tenant:Object(E.a)(),username:s&&s.username||\"\"},onSubscriptionData:function(n){var e=n.subscriptionData.data.userTypingStatus,i=t.findIndex((function(n){return e.username===n}));clearTimeout(r[e.username]),e.isTyping?(-1===i&&o([].concat(Object(f.a)(t),[e.username])),h(e.username)):-1!==i&&o(t.filter((function(n){return n!==e.username})))}});return t.length>0&&Y(R,null,Y(\"span\",{style:{marginRight:5}},function(){var n=t.slice(0,2).join(\", \"),o=t.length>2?\"and \".concat(t.length-2,\" others\"):\"\";return\"\".concat(n,\" \").concat(o,\" is responding\")}()),Y(I,null),Y(I,null),Y(I,null))}}}]);"}